codechain patchfile version 1
treehash 4b607a05e42694f851de25a480f5bc7a8d856851c0954b4a3866bfaa396f839a
- f d85d8c79ea9927df624061ccdaba3d5e627e6bb0fc4dccd968340843033cf353 Gopkg.lock
+ f b3ada8e58dcd0f01191b0c5c9a7458a3a72cb12900fc0b1473788b0a5382cfa1 Gopkg.lock
dmppatch 15
@@ -156,85 +156,85 @@
 .%22%5D%0A
-  revision = %22507f6050b8568533fb3f5504de8e5205fa62a114%22%0A  version = %22v1.6.0%22%0A
+  revision = %225b77d2a35fb0ede96d138fc9a99f5c9b6aef11b4%22%0A  version = %22v1.7.0%22%0A
 %0A%5B%5Bp
@@ -1089,64 +1089,64 @@
   %5D%0A
-  revision = %222d027ae1dddd4694d54f7a8b6cbe78dca8720226%22%0A
+  revision = %221a580b3eff7814fc9b40602fd35256c63b50f491%22%0A
 %0A%5B%5Bp
@@ -1263,64 +1263,64 @@
   %5D%0A
-  revision = %22d0faeb539838e250bd0a9db4182d48d4a1915181%22%0A
+  revision = %227c87d13f8e835d2fb3a70a2912c811ed0c1d241b%22%0A
 %0A%5Bso
- f ed2db0013bc701e4d6e32bccf9fd444b6085b2ca04a9e76558688d0b787ccf0d README.md
+ f 72ede448ddf83009883760cdfdcc0e5ed7732cd8e27ff9f7bea4159e0c331358 README.md
dmppatch 20
@@ -1,67 +1,67 @@
-## Codechain %E2%80%94 code trust through hash chains %E2%80%94 %CE%B1 release%0A
+## Codechain %E2%80%94 code trust through hash chains %E2%80%94 %CE%B2 release%0A
 %0A%5B!%5B
@@ -501,172 +501,240 @@
 n)%0A%0A
-This is an **alpha** release of Codechain %E2%80%94 **the hash chain might be reset**!%0A
+This is a **beta** release of Codechain %E2%80%94 everything is fairly stable,%0Abut there is still a small risk that **the hash chain might be reset**!%0A
 %0A
-In code we trust: Secure multiparty code reviews with signatures and%0Ahash chains.%0A
+### In code we trust: Secure multiparty code reviews with signatures and hash chains.%0A
 %0AThe
@@ -2306,16 +2306,132 @@
 y -f%60).%0A
+- %5BReproducible builds%5D(https://reproducible-builds.org/).%0A%0A%0A### Documentation%0A%0A- %5BWalkthrough%5D(doc/walkthrough.md)%0A
 %0A### Ack
@@ -2560,54 +2560,59 @@
  of%0A
-%5BCryptohippie%5D(https://secure.cryptohippie.com/).%0A
+%5BCryptohippie%5D(https://secure.cryptohippie.com/), Inc.%0A
+ f c38bf0b23ef09a47061ae31e8308ed4d0ffe6572eaf7100c108670646976c6ea cmd/ccfindhead/ccfindhead.go
dmppatch 2
@@ -0,0 +1,1068 @@
+// ccfindhead finds a given head in a hash chain file.%0Apackage main%0A%0Aimport (%0A%09%22bufio%22%0A%09%22bytes%22%0A%09%22crypto/sha256%22%0A%09%22encoding/hex%22%0A%09%22errors%22%0A%09%22fmt%22%0A%09%22os%22%0A)%0A%0Afunc findHead(hashchainFile, headInHex string) error %7B%0A%09head, err := hex.DecodeString(headInHex)%0A%09if err != nil %7B%0A%09%09return err%0A%09%7D%0A%09if len(head) != 32 %7B%0A%09%09return errors.New(%22head_in_hex is not 32 bytes long%22)%0A%09%7D%0A%09f, err := os.Open(hashchainFile)%0A%09if err != nil %7B%0A%09%09return err%0A%09%7D%0A%09defer f.Close()%0A%09scanner := bufio.NewScanner(f)%0A%09for scanner.Scan() %7B%0A%09%09lineHash := sha256.Sum256(scanner.Bytes())%0A%09%09if bytes.Equal(lineHash%5B:%5D, head) %7B%0A%09%09%09fmt.Println(%22head found%22)%0A%09%09%09return nil%0A%09%09%7D%0A%09%7D%0A%09if err := scanner.Err(); err != nil %7B%0A%09%09return err%0A%09%7D%0A%09return errors.New(%22cannot find head%22)%0A%7D%0A%0Afunc fatal(err error) %7B%0A%09fmt.Fprintf(os.Stderr, %22%25s: error: %25s%5Cn%22, os.Args%5B0%5D, err)%0A%09os.Exit(1)%0A%7D%0A%0Afunc usage() %7B%0A%09fmt.Fprintf(os.Stderr, %22usage: %25s hashchain_file head_in_hex%5Cn%22, os.Args%5B0%5D)%0A%09os.Exit(2)%0A%7D%0A%0Afunc main() %7B%0A%09if len(os.Args) != 3 %7B%0A%09%09usage()%0A%09%7D%0A%09if err := findHead(os.Args%5B1%5D, os.Args%5B2%5D); err != nil %7B%0A%09%09fatal(err)%0A%09%7D%0A%7D%0A
- f b4132dd9e8dd8c4d670b94870829147645e2987d010a37f6325f4cf4e92fd204 doc/walkthrough.md
+ f 1d9b1c0fe2ea1a6b4d5894a237ad3688123259f85938c38f9e3afd8288cd9418 doc/walkthrough.md
dmppatch 110
@@ -23,2714 +23,9079 @@
 gh%0A%0A
+Start Codechain walkthrough with example project:%0A%0A
 %60%60%60%0A
-# %5Bsingle tmux window%5D%0A# let's assume you have %60go%60 installed and $GOPATH set%0A# otherwise go to https://golang.org/dl/%0A
+$ cd doc/hellproject%0A$ ls%0Ahello.go README.md%0A%60%60%60%0A
 %0A
-# get Codechain repository from GitHub%0Ago get -u -v github.com/frankbraun/codechain%0A
+Let's generate a key pair for Alice:%0A%60%60%60%0A$ codechain keygen%0Apassphrase: %0Aconfirm passphrase: %0Acomment (e.g., name; can be empty):%0AAlice %3Calice@example.com%3E%0Asecret key file created:%0A/home/frank/.config/codechain/secrets/KDKOGoY8ErjOnbDQb4k8SZFMvWdAIb-x6FGKKCRby70%0Apublic key with signature and optional comment:%0AKDKOGoY8ErjOnbDQb4k8SZFMvWdAIb-x6FGKKCRby70 JNBIdjLOu20He3c-Dn7sjpspO8bmKFxTlOItfZkqieb8h218t3g-QooDATGGbrzYzVNbDqb7LCFFnJxEH7hcBA 'Alice %3Calice@example.com%3E'%0A%60%60%60%0A
 %0A
-# change to Codechain directory%0Acd $GOPATH/src/github.com/frankbraun/codechain%0A
+Let's start using Codechain for our example project:%0A%60%60%60%0A$ codechain start -s ~/.config/codechain/secrets/KDKOGoY8ErjOnbDQb4k8SZFMvWdAIb-x6FGKKCRby70%0Apassphrase: %0Ae3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 2018-05-19T00:07:02Z cstart KDKOGoY8ErjOnbDQb4k8SZFMvWdAIb-x6FGKKCRby70 sVnVenzHyCOV6nLUkCKg6ARllkYsTV-n 0UmUcDFZ2j3WWnqzEdxX-wzofWlhF3O0Rm1tT6qMUwLu8a1R5MwbK5zDongYZKccpA37Vp6Sp3m0xSreGskzCg Alice %3Calice@example.com%3E%0A%60%60%60%0A
 %0A
-# use Codechain to verify Codechain code and switch to latest published version%0Acodechain cleanslate%0Acodechain apply%0Ago install github.com/frankbraun/codechain%0A
+Let's add Bob (who already has a key) as reviewer:%0A
 %0A
-# start Codechain walkthrough with example project%0Acd doc/hellproject%0Als%0Acat README.md%0Acat hello.go%0A
+%60%60%60%0A$ codechain addkey 91HOu2fvkjHd5S0LtAWTl6dYBk5cqB-NWiJqc0c_7Gc Xsr_L-1_5_B56vocve8s3Pb3vJoc-jpa2-tzIQhEjuoytYfcAiONu3er6RnVNMcsPuZFeqWCQKBwka-F-c13Ag 'Bob %3Cbob@example.com%3E'%0A40c7e5ca4be98e9cae6931afa4ac09e11ecb1ce20fa18d0faaabfac7e8fad071 2018-05-19T00:09:44Z addkey 1 91HOu2fvkjHd5S0LtAWTl6dYBk5cqB-NWiJqc0c_7Gc Xsr_L-1_5_B56vocve8s3Pb3vJoc-jpa2-tzIQhEjuoytYfcAiONu3er6RnVNMcsPuZFeqWCQKBwka-F-c13Ag Bob %3Cbob@example.com%3E%0A%60%60%60%0A
 %0A
-# Codechain has various commands%0Acodechain -h%0A
+Increase number of necessary signers to two:%0A
 %0A
-# %60codechain treehash%60 computes the hash of a directory tree%0Acodechain treehash%0A
+%60%60%60%0A$ codechain sigctl -m 2%0A34cd10effd93e67ba96fefb29ea751d013459a6de11cc117cf1deacd77d6b7be 2018-05-19T00:10:25Z sigctl 2%0A%60%60%60%0A
 %0A
-# the hash is computed by hashing a deterministic tree list%0Acodechain treehash -l%0Acodechain treehash -l %7C sha256sum%0A
+Publish first release:%0A
 %0A
-# let's generate a key pair%0Acodechain keygen%0A
+%60%60%60%0A$ codechain publish%0Aopening keyfile: /home/frank/.config/codechain/secrets/KDKOGoY8ErjOnbDQb4k8SZFMvWdAIb-x6FGKKCRby70%0Apassphrase: %0Adiff --git a/.codechain/tree/b/README.md b/.codechain/tree/b/README.md%0Anew file mode 100644%0Aindex 0000000..841852c%0A--- /dev/null%0A+++ b/.codechain/tree/b/README.md%0A@@ -0,0 +1 @@%0A+## Example project for Codechain walkthrough%0Adiff --git a/.codechain/tree/b/hello.go b/.codechain/tree/b/hello.go%0Anew file mode 100644%0Aindex 0000000..c40eee0%0A--- /dev/null%0A+++ b/.codechain/tree/b/hello.go%0A@@ -0,0 +1,9 @@%0A+package main%0A+%0A+import (%0A+       %22fmt%22%0A+)%0A+%0A+func main() %7B%0A+       fmt.Println(%22hello world!%22)%0A+%7D%0Apublish patch? %5By/n%5D: y%0Acomment describing code change (can be empty):%0Afirst release%0A92d2fc6687b0d36d045adaf34a1615e513ef0e2dc60384cfe19863e9753567f8 2018-05-19T00:11:44Z source d844cbe6f6c2c29e97742b272096407e4d92e6ac7f167216b321c7aa55629716 KDKOGoY8ErjOnbDQb4k8SZFMvWdAIb-x6FGKKCRby70 r5aZCYGwWCFppaMDV7XSOHoyCl3qbUKGiSuYzjsTl4C0W9n0tCa0MXDy_fOwspV9f4_o0kMcb6XZS706ml3FAQ first release%0A%60%60%60%0A
 %0A
-# let's start using Codechain for our example project%0Acodechain start -s ~/.config/codechain/secrets/...%0A
+Review changes:%0A
 %0A
-# this started the hash chain%0Acat .codechain/hashchain%0A
+%60%60%60%0A$ codechain review%0Aopening keyfile: /home/frank/.config/codechain/secrets/KDKOGoY8ErjOnbDQb4k8SZFMvWdAIb-x6FGKKCRby70%0Apassphrase: %0Asigner/sigctl changes:%0A0 addkey 1 91HOu2fvkjHd5S0LtAWTl6dYBk5cqB-NWiJqc0c_7Gc Bob %3Cbob@example.com%3E%0A0 sigctl 2%0Aconfirm signer/sigctl changes? %5By/n%5D: y%0Apatch 1/1%0Afirst release%0Adeveloper: KDKOGoY8ErjOnbDQb4k8SZFMvWdAIb-x6FGKKCRby70%0AAlice %3Calice@example.com%3E%0Areview patch (no aborts)? %5By/n%5D: y%0Adiff --git a/.codechain/tree/b/README.md b/.codechain/tree/b/README.md%0Anew file mode 100644%0Aindex 0000000..841852c%0A--- /dev/null%0A+++ b/.codechain/tree/b/README.md%0A@@ -0,0 +1 @@%0A+## Example project for Codechain walkthrough%0Adiff --git a/.codechain/tree/b/hello.go b/.codechain/tree/b/hello.go%0Anew file mode 100644%0Aindex 0000000..c40eee0%0A--- /dev/null%0A+++ b/.codechain/tree/b/hello.go%0A@@ -0,0 +1,9 @@%0A+package main%0A+%0A+import (%0A+       %22fmt%22%0A+)%0A+%0A+func main() %7B%0A+       fmt.Println(%22hello world!%22)%0A+%7D%0Asign patch? %5By/n%5D: y%0Ad258ce20943beeed2d483096702a1449447f112dec7d907d50c285c649c17a24 2018-05-19T00:12:48Z signtr d258ce20943beeed2d483096702a1449447f112dec7d907d50c285c649c17a24 KDKOGoY8ErjOnbDQb4k8SZFMvWdAIb-x6FGKKCRby70 HKlLKnYSCVzc4b-erETK50EN5gKRKZQsT16grv7eFBklFqXBFoSXSmcY99HLWhAP9BJcA6c3Px1trNBns3KkDA%0A%60%60%60%0A
 %0A
-# also:%0Acodechain status -p%0A
+See current status of project:%0A
 %0A
-# see current status of project%0Acodechain status%0A
+%60%60%60%0A$ codechain status%0Ano signed releases yet%0A
 %0A
-# let's publish our first release%0Acodechain publish%0A
+signers (2-of-2 required):%0A1 91HOu2fvkjHd5S0LtAWTl6dYBk5cqB-NWiJqc0c_7Gc Bob %3Cbob@example.com%3E%0A1 KDKOGoY8ErjOnbDQb4k8SZFMvWdAIb-x6FGKKCRby70 Alice %3Calice@example.com%3E%0A
 %0A
-# the first release has been published, but is not signed yet%0Acodechain status%0A
+unsigned entries:%0A1 source d844cbe6f6c2c29e97742b272096407e4d92e6ac7f167216b321c7aa55629716 first release%0A
 %0A
-# let's review and sign it%0Acodechain review%0A
+head:%0A2e34e23ee293e8c0ed174639d325eb3e30f5337d5c5846380367724e93cb619e%0A
 %0A
-# now we have our first signed release%0Acodechain status%0A
+tree matches d844cbe6f6c2c29e97742b272096407e4d92e6ac7f167216b321c7aa55629716%0A%60%60%60%0A
 %0A
-# let's bring a second reviewer on board%0A# %5Bswitch tmux window ctrl+b n%5D%0A# the reviewer already has Codechain installed%0A# generate a key%0Acodechain keygen%0A
+Because Bob was added as the second reviewer first, we still need his signature for the first release. Let's build a distribution for him:%0A
 %0A
-# %5Bswitch tmux window ctrl+b n%5D%0A# add second signer%0Acodechain addkey ...%0A
+%60%60%60%0A$ codechain createdist -f /tmp/dist.tar.gz%0A%60%60%60%0A
 %0A
-# increase number of necessary signers%0Acodechain sigctl -m 2%0Acodechain status%0A
+Now as Bob, apply the distribution in an empty %60~/helloproject%60 directory:%0A
 %0A
-# sign-off on second signer%0Acodechain review%0Acodechain status%0A
+%60%60%60%0A$ cd ~/helloproject%0A$ codechain apply -f /tmp/dist.tar.gz%0A$ find . -type f%0A./.codechain/hashchain%0A./.codechain/patches/e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855%0A%60%60%60%0A
 %0A
-# add UNLICENSE to project%0Acp ../../UNLICENSE .%0A
+Now Bob reviews the changes and creates a detached signature:%0A
 %0A
-# publish new version%0Acodechain publish%0Acodechain status%0A
+%60%60%60%0A$ codechain review -d%0Aopening keyfile: /home/frank/bob.bin%0Apassphrase: %0Apatch 1/1%0Afirst release%0Adeveloper: KDKOGoY8ErjOnbDQb4k8SZFMvWdAIb-x6FGKKCRby70%0AAlice %3Calice@example.com%3E%0Areview patch (no aborts)? %5By/n%5D: y%0Adiff --git a/.codechain/tree/b/README.md b/.codechain/tree/b/README.md%0Anew file mode 100644%0Aindex 0000000..841852c%0A--- /dev/null%0A+++ b/.codechain/tree/b/README.md%0A@@ -0,0 +1 @@%0A+## Example project for Codechain walkthrough%0Adiff --git a/.codechain/tree/b/hello.go b/.codechain/tree/b/hello.go%0Anew file mode 100644%0Aindex 0000000..c40eee0%0A--- /dev/null%0A+++ b/.codechain/tree/b/hello.go%0A@@ -0,0 +1,9 @@%0A+package main%0A+%0A+import (%0A+       %22fmt%22%0A+)%0A+%0A+func main() %7B%0A+       fmt.Println(%22hello world!%22)%0A+%7D%0Asign patch? %5By/n%5D: y%0A2e34e23ee293e8c0ed174639d325eb3e30f5337d5c5846380367724e93cb619e 91HOu2fvkjHd5S0LtAWTl6dYBk5cqB-NWiJqc0c_7Gc xffZultos-MCbI4cNzAzAoccuDSnpL2nq_BsQanIruYM3RXoD9kdC6WiPEUkxrphKdG742IgBWlB3LwY0i1ZCw%0A%60%60%60%0A
 %0A
-# sign new release%0Acodechain review%0Acodechain status%0A
+Now Alice can add the detached signature:%0A
 %0A
-# we still need the second signature, create distribution%0Acodechain createdist -f /tmp/dist.tar.gz%0A
+%60%60%60%0A$ codechain review -a 2e34e23ee293e8c0ed174639d325eb3e30f5337d5c5846380367724e93cb619e 91HOu2fvkjHd5S0LtAWTl6dYBk5cqB-NWiJqc0c_7Gc xffZultos-MCbI4cNzAzAoccuDSnpL2nq_BsQanIruYM3RXoD9kdC6WiPEUkxrphKdG742IgBWlB3LwY0i1ZCw%0A2e34e23ee293e8c0ed174639d325eb3e30f5337d5c5846380367724e93cb619e 2018-05-19T00:34:51Z signtr 2e34e23ee293e8c0ed174639d325eb3e30f5337d5c5846380367724e93cb619e 91HOu2fvkjHd5S0LtAWTl6dYBk5cqB-NWiJqc0c_7Gc xffZultos-MCbI4cNzAzAoccuDSnpL2nq_BsQanIruYM3RXoD9kdC6WiPEUkxrphKdG742IgBWlB3LwY0i1ZCw%0A%60%60%60%0A
 %0A
-# %5Bswitch tmux window%5D%0A# apply new distribution%0Acodechain apply -f /tmp/dist.tar.gz%0A
+Which gives us our first signed release:%0A
 %0A
-# create detached signature and send it to John%0Acodechain review -d%0A
+%60%60%60%0A$ codechain status%0Asigned releases:%0Ad844cbe6f6c2c29e97742b272096407e4d92e6ac7f167216b321c7aa55629716 first release%0A
 %0A
-# %5Bswitch tmux window%5D%0A# add detached signature%0Acodechain review -a ...%0A
+signers (2-of-2 required):%0A1 91HOu2fvkjHd5S0LtAWTl6dYBk5cqB-NWiJqc0c_7Gc Bob %3Cbob@example.com%3E%0A1 KDKOGoY8ErjOnbDQb4k8SZFMvWdAIb-x6FGKKCRby70 Alice %3Calice@example.com%3E%0A
 %0A
-# now we a new signed release%0Acodechain status%0A
+no unsigned entries%0A%0Ahead:%0A9f97737b292f66e52c06027871be328006f125a9d86fbe1fc4f03ff98303e36f%0A
 %0A
-# let's remove the second reviewer again%0Acodechain sigctl -m 1%0Acodechain remkey ...%0Acodechain review%0A
+tree matches d844cbe6f6c2c29e97742b272096407e4d92e6ac7f167216b321c7aa55629716%0A%60%60%60%0A
 %0A
-# of course, Jane has to sign off on it%0Acodechain status%0Acodechain createdist -f /tmp/dist2.tar.gz%0A
+Which we can publish now:%0A%60%60%60%0A$ codechain createdist -f /tmp/helloproject.tar.gz%0A%60%60%60%0A
 %0A
-# %5Bswitch tmux window%5D%0A# apply new distribution%0Acodechain apply -f /tmp/dist.tar.gz%0A
+Users can apply it a directory %60~/helloproject%60 and verify the hash chain%0Acontains the head with:%0A
 %0A
-# create detached signature and send it to John%0Acodechain review -d%0A
+%60%60%60%0A$ cd ~/helloproject%0A$ codechain apply -f /tmp/helloproject.tar.gz -head 9f97737b292f66e52c06027871be328006f125a9d86fbe1fc4f03ff98303e36f%0A%60%60%60%0A
 %0A
-# %5Bswitch tmux window%5D%0A# add detached signature%0Acodechain review -a ...%0A
+The tree hash now matches the first signed release:%0A%60%60%60%0A$ codechain treehash%0Ad844cbe6f6c2c29e97742b272096407e4d92e6ac7f167216b321c7aa55629716%0A%60%60%60%0A
 %0A
-# now we are back to one reviewer%0Acodechain status%0A
+Show the complete hash chain:%0A
 %0A%60%60%60%0A
+$ codechain status -p%0Ae3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 2018-05-19T00:07:02Z cstart KDKOGoY8ErjOnbDQb4k8SZFMvWdAIb-x6FGKKCRby70 sVnVenzHyCOV6nLUkCKg6ARllkYsTV-n 0UmUcDFZ2j3WWnqzEdxX-wzofWlhF3O0Rm1tT6qMUwLu8a1R5MwbK5zDongYZKccpA37Vp6Sp3m0xSreGskzCg Alice %3Calice@example.com%3E%0A40c7e5ca4be98e9cae6931afa4ac09e11ecb1ce20fa18d0faaabfac7e8fad071 2018-05-19T00:09:44Z addkey 1 91HOu2fvkjHd5S0LtAWTl6dYBk5cqB-NWiJqc0c_7Gc Xsr_L-1_5_B56vocve8s3Pb3vJoc-jpa2-tzIQhEjuoytYfcAiONu3er6RnVNMcsPuZFeqWCQKBwka-F-c13Ag Bob %3Cbob@example.com%3E%0A34cd10effd93e67ba96fefb29ea751d013459a6de11cc117cf1deacd77d6b7be 2018-05-19T00:10:25Z sigctl 2%0A92d2fc6687b0d36d045adaf34a1615e513ef0e2dc60384cfe19863e9753567f8 2018-05-19T00:11:44Z source d844cbe6f6c2c29e97742b272096407e4d92e6ac7f167216b321c7aa55629716 KDKOGoY8ErjOnbDQb4k8SZFMvWdAIb-x6FGKKCRby70 r5aZCYGwWCFppaMDV7XSOHoyCl3qbUKGiSuYzjsTl4C0W9n0tCa0MXDy_fOwspV9f4_o0kMcb6XZS706ml3FAQ first release%0Ad258ce20943beeed2d483096702a1449447f112dec7d907d50c285c649c17a24 2018-05-19T00:12:48Z signtr d258ce20943beeed2d483096702a1449447f112dec7d907d50c285c649c17a24 KDKOGoY8ErjOnbDQb4k8SZFMvWdAIb-x6FGKKCRby70 HKlLKnYSCVzc4b-erETK50EN5gKRKZQsT16grv7eFBklFqXBFoSXSmcY99HLWhAP9BJcA6c3Px1trNBns3KkDA%0A2e34e23ee293e8c0ed174639d325eb3e30f5337d5c5846380367724e93cb619e 2018-05-19T00:34:51Z signtr 2e34e23ee293e8c0ed174639d325eb3e30f5337d5c5846380367724e93cb619e 91HOu2fvkjHd5S0LtAWTl6dYBk5cqB-NWiJqc0c_7Gc xffZultos-MCbI4cNzAzAoccuDSnpL2nq_BsQanIruYM3RXoD9kdC6WiPEUkxrphKdG742IgBWlB3LwY0i1ZCw%0A%60%60%60%0A
- f c4a2bbee0f39783249ab2135a860f244bcb196051b75f8df2b116bd4475ac44e hashchain/doc.go
+ f b1d63a7a47da12ccb3761d0482129ca60149f641adb61b9b51c126636fefb0e7 hashchain/doc.go
dmppatch 43
@@ -166,70 +166,77 @@
 ash%0A
-chain entry corresponds to a line and has the following form:%0A
+chain entry corresponds to a single line and has the following form:%0A
 %0A  h
@@ -832,61 +832,61 @@
 s.%0A%0A
-Their are six different types of hash chain entries:%0A
+There are six different types of hash chain entries:%0A
 %0A  c
@@ -1811,161 +1811,164 @@
 s.%0A%0A
-  hash-of-previous current-time source source-hash pubkey signature %5Bcomment%5D%0A
+  hash-of-previous current-time source tree-hash pubkey signature %5Bcomment%5D%0A
 %0A
-The signature by pubkey is over the source-hash and the optional comment.%0A
+The signature by pubkey is over the source tree hash and the optional comment.%0A
 See 
@@ -2283,211 +2283,223 @@
 re%0A%0A
-It does not sign the previous line and can therefore be done in a detached%0Afashion by a reviewer and added later by the developer responsible for%0Amaintaining the hash chain. This avoids merge conflicts.%0A
+It does not necessarily sign the previous line and can therefore be done in a%0Adetached fashion by a reviewer and added later by the developer responsible%0Afor maintaining the hash chain. This avoids merge conflicts.%0A
 %0A%0ATy
@@ -2513,84 +2513,86 @@
 ey%0A%0A
-An addkey entry adds a signature pubkey to be added to the list of approved%0A
+An addkey entry marks a signature pubkey for addition to the list of approved%0A
 sign
@@ -2608,87 +2608,76 @@
 s.%0A%0A
-  hash-of-previous current-time addkey pubkey-add w pubkey signature %5Bcomment%5D%0A
+  hash-of-previous current-time addkey w pubkey signature %5Bcomment%5D%0A
 %0AThe
@@ -3010,61 +3010,102 @@
 ey%0A%0A
-A remkey entry marks a signature pubkey for removal.%0A
+A remkey entry marks a signature pubkey for removal from the list of approved%0Asignature keys.%0A
 %0A  h
@@ -3372,900 +3372,1527 @@
 n.%0A%0A
-  e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 2018-05-12T01:50:44Z cstart 36h_YdLNmKo8AYBWRQrTK_JbGLUpp3tBkfWLBwWLoEg 5GQKPh8TdrM8-9oaqGbLmHU114vfGNzr NJtS4MVm8WIc2YhMPqJzXGD4i6LBkdxpRP6WeQoG9PfFRdi1F7pKdvQxgB9d3X1J9L3VgZsfhBm910zfET0eBQ John Doe %3Cjohn.doe@mailinator.com%3E%0A  94d49adf9bad1104ab2f7117d45fa177bc416ea0ad5a44b4569e89f04728ff94 2018-05-12T01:51:03Z source d844cbe6f6c2c29e97742b272096407e4d92e6ac7f167216b321c7aa55629716 36h_YdLNmKo8AYBWRQrTK_JbGLUpp3tBkfWLBwWLoEg KWWplv94ziYZsxjtnf4sGuzC2bvA-LSB0-fSbTGfCCt9aAf7rgn3SKSidyACWtQLKoY4qrvRDZYDNEAdqhT0Cg initial release%0A  170c3bb3733a79c0b7a3da7c20e5fe4a8f206fd83771a3d70b0f050c14dd5cfb 2018-05-12T01:51:24Z signtr 170c3bb3733a79c0b7a3da7c20e5fe4a8f206fd83771a3d70b0f050c14dd5cfb 36h_YdLNmKo8AYBWRQrTK_JbGLUpp3tBkfWLBwWLoEg VBpOkf3PAQhGe67cgaxn4eDQBSzsv-w1lFIQhw02pfvoLLIVZ_fHBZHO2wQUfOiVEfI4uhHfrB7KkDzliY05DQ%0A
+  e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 2018-05-19T00:07:02Z cstart KDKOGoY8ErjOnbDQb4k8SZFMvWdAIb-x6FGKKCRby70 sVnVenzHyCOV6nLUkCKg6ARllkYsTV-n 0UmUcDFZ2j3WWnqzEdxX-wzofWlhF3O0Rm1tT6qMUwLu8a1R5MwbK5zDongYZKccpA37Vp6Sp3m0xSreGskzCg Alice %3Calice@example.com%3E%0A  40c7e5ca4be98e9cae6931afa4ac09e11ecb1ce20fa18d0faaabfac7e8fad071 2018-05-19T00:09:44Z addkey 1 91HOu2fvkjHd5S0LtAWTl6dYBk5cqB-NWiJqc0c_7Gc Xsr_L-1_5_B56vocve8s3Pb3vJoc-jpa2-tzIQhEjuoytYfcAiONu3er6RnVNMcsPuZFeqWCQKBwka-F-c13Ag Bob %3Cbob@example.com%3E%0A  34cd10effd93e67ba96fefb29ea751d013459a6de11cc117cf1deacd77d6b7be 2018-05-19T00:10:25Z sigctl 2%0A  92d2fc6687b0d36d045adaf34a1615e513ef0e2dc60384cfe19863e9753567f8 2018-05-19T00:11:44Z source d844cbe6f6c2c29e97742b272096407e4d92e6ac7f167216b321c7aa55629716 KDKOGoY8ErjOnbDQb4k8SZFMvWdAIb-x6FGKKCRby70 r5aZCYGwWCFppaMDV7XSOHoyCl3qbUKGiSuYzjsTl4C0W9n0tCa0MXDy_fOwspV9f4_o0kMcb6XZS706ml3FAQ first release%0A  d258ce20943beeed2d483096702a1449447f112dec7d907d50c285c649c17a24 2018-05-19T00:12:48Z signtr d258ce20943beeed2d483096702a1449447f112dec7d907d50c285c649c17a24 KDKOGoY8ErjOnbDQb4k8SZFMvWdAIb-x6FGKKCRby70 HKlLKnYSCVzc4b-erETK50EN5gKRKZQsT16grv7eFBklFqXBFoSXSmcY99HLWhAP9BJcA6c3Px1trNBns3KkDA%0A  2e34e23ee293e8c0ed174639d325eb3e30f5337d5c5846380367724e93cb619e 2018-05-19T00:34:51Z signtr 2e34e23ee293e8c0ed174639d325eb3e30f5337d5c5846380367724e93cb619e 91HOu2fvkjHd5S0LtAWTl6dYBk5cqB-NWiJqc0c_7Gc xffZultos-MCbI4cNzAzAoccuDSnpL2nq_BsQanIruYM3RXoD9kdC6WiPEUkxrphKdG742IgBWlB3LwY0i1ZCw%0A
 */%0Ap
- f 0660761cba51023e790aad0cd8f2a14a892c23f12f353f0199ce29ba7b102bd2 hashchain/errors.go
+ f 170122741521ba4ee5c89d261eb6a14b09126383ee36bf1aaa343034180a5c38 hashchain/errors.go
dmppatch 5
@@ -2406,84 +2406,85 @@
 %22)%0A%0A
-// ErrHeadNotFound is returnd if the head could not be found in hash chain.%0A
+// ErrHeadNotFound is returned if the head could not be found in hash chain.%0A
 var 
- f 62977ed959093dcfd49508812a933897fdfa3e8f374b16c51428d2367687e16f internal/ascii85/ascii85.go
+ f a7b3276bbce38a5f71e40f1c0e4337b9336dbcd60886677c04ac1867da082f48 internal/ascii85/ascii85.go
dmppatch 3
@@ -1,8 +1,82 @@
+// Package ascii85 implements ascii85 encoding related utility functions.%0A
 package 
- f d10c2028aec507e35d5d86f513346fdca0b609bb7f5798463a26fdeba87c6807 tree/tree.go
+ f 5599f3c8956f16645f633da8256c6db5909536d944ef241ae0945d647d02bae6 tree/tree.go
dmppatch 10
@@ -158,62 +158,67 @@
 %0A)%0A%0A
-// SHA256 returns the SHA256 of file with given path.%0A
+// SHA256 returns the SHA256 hash of file with given path.%0A
 func
@@ -894,72 +894,76 @@
  in%0A
-// the file tree rooted at root. See List function for details.%0A
+// the file tree rooted at root. See ListHash function for details.%0A
 func
- f a2c297876e7cafb290511be203f50d39f9fa48da914f7f41b7ff835d6bb2695c vendor/github.com/fatih/color/color.go
+ f abc3b13187b1d0af6f264b7590a97d9ba44bae86d173f4f1c3a7242180abd767 vendor/github.com/fatih/color/color.go
dmppatch 4
@@ -711,16 +711,116 @@
 dout()%0A%0A
+%09// Error defines a color supporting writer for os.Stderr.%0A%09Error = colorable.NewColorableStderr()%0A%0A
 %09// colo
+ f cf04db41dbca43dba134a695e148958d85bfbd56213603dffb1af66bcd07b7a1 vendor/golang.org/x/crypto/poly1305/sum_noasm.go
dmppatch 2
@@ -0,0 +1,539 @@
+// Copyright 2018 The Go Authors. All rights reserved.%0A// Use of this source code is governed by a BSD-style%0A// license that can be found in the LICENSE file.%0A%0A// +build s390x,!go1.11 !arm,!amd64,!s390x gccgo appengine nacl%0A%0Apackage poly1305%0A%0A// Sum generates an authenticator for msg using a one-time key and puts the%0A// 16-byte result into out. Authenticating two different messages with the same%0A// key allows an attacker to forge messages at will.%0Afunc Sum(out *%5BTagSize%5Dbyte, msg %5B%5Dbyte, key *%5B32%5Dbyte) %7B%0A%09sumGeneric(out, msg, key)%0A%7D%0A
- f d9569cec4d101b80380d499673a132d70107d2a086e3db3154e18b5008f190c9 vendor/golang.org/x/crypto/poly1305/sum_ref.go
+ f 5b172acfbfdb395da9ebc317b048eb4dc1acf44a2dce7110c29f9f6b619685f5 vendor/golang.org/x/crypto/poly1305/sum_ref.go
dmppatch 9
@@ -157,52 +157,8 @@
 e.%0A%0A
-// +build !amd64,!arm gccgo appengine nacl%0A%0A
 pack
@@ -201,275 +201,294 @@
 y%22%0A%0A
-// Sum generates an authenticator for msg using a one-time key and puts the%0A// 16-byte result into out. Authenticating two different messages with the same%0A// key allows an attacker to forge messages at will.%0Afunc Sum(out *%5BTagSize%5Dbyte, msg %5B%5Dbyte, key *%5B32%5Dbyte) %7B%0A
+// sumGeneric generates an authenticator for msg using a one-time key and%0A// puts the 16-byte result into out. This is the generic implementation of%0A// Sum and should be called if no assembly implementation is available.%0Afunc sumGeneric(out *%5BTagSize%5Dbyte, msg %5B%5Dbyte, key *%5B32%5Dbyte) %7B%0A
 %09var
+ f 60768a98b4fe6fc8982fe50a0f2408b7abfaa3253ec3a003045f5e44d30a3f5a vendor/golang.org/x/crypto/poly1305/sum_s390x.go
dmppatch 2
@@ -0,0 +1,1560 @@
+// Copyright 2018 The Go Authors. All rights reserved.%0A// Use of this source code is governed by a BSD-style%0A// license that can be found in the LICENSE file.%0A%0A// +build s390x,go1.11,!gccgo,!appengine%0A%0Apackage poly1305%0A%0A// hasVectorFacility reports whether the machine supports%0A// the vector facility (vx).%0Afunc hasVectorFacility() bool%0A%0A// hasVMSLFacility reports whether the machine supports%0A// Vector Multiply Sum Logical (VMSL).%0Afunc hasVMSLFacility() bool%0A%0Avar hasVX = hasVectorFacility()%0Avar hasVMSL = hasVMSLFacility()%0A%0A// poly1305vx is an assembly implementation of Poly1305 that uses vector%0A// instructions. It must only be called if the vector facility (vx) is%0A// available.%0A//go:noescape%0Afunc poly1305vx(out *%5B16%5Dbyte, m *byte, mlen uint64, key *%5B32%5Dbyte)%0A%0A// poly1305vmsl is an assembly implementation of Poly1305 that uses vector%0A// instructions, including VMSL. It must only be called if the vector facility (vx) is%0A// available and if VMSL is supported.%0A//go:noescape%0Afunc poly1305vmsl(out *%5B16%5Dbyte, m *byte, mlen uint64, key *%5B32%5Dbyte)%0A%0A// Sum generates an authenticator for m using a one-time key and puts the%0A// 16-byte result into out. Authenticating two different messages with the same%0A// key allows an attacker to forge messages at will.%0Afunc Sum(out *%5B16%5Dbyte, m %5B%5Dbyte, key *%5B32%5Dbyte) %7B%0A%09if hasVX %7B%0A%09%09var mPtr *byte%0A%09%09if len(m) %3E 0 %7B%0A%09%09%09mPtr = &m%5B0%5D%0A%09%09%7D%0A%09%09if hasVMSL && len(m) %3E 256 %7B%0A%09%09%09poly1305vmsl(out, mPtr, uint64(len(m)), key)%0A%09%09%7D else %7B%0A%09%09%09poly1305vx(out, mPtr, uint64(len(m)), key)%0A%09%09%7D%0A%09%7D else %7B%0A%09%09sumGeneric(out, m, key)%0A%09%7D%0A%7D%0A
+ f ad62ecb74eb282a5800e99b147087318f05e8b00ced372a13ff7a95ccc566f3f vendor/golang.org/x/crypto/poly1305/sum_s390x.s
dmppatch 2
@@ -0,0 +1,9045 @@
+// Copyright 2018 The Go Authors. All rights reserved.%0A// Use of this source code is governed by a BSD-style%0A// license that can be found in the LICENSE file.%0A%0A// +build s390x,go1.11,!gccgo,!appengine%0A%0A#include %22textflag.h%22%0A%0A// Implementation of Poly1305 using the vector facility (vx).%0A%0A// constants%0A#define MOD26 V0%0A#define EX0   V1%0A#define EX1   V2%0A#define EX2   V3%0A%0A// temporaries%0A#define T_0 V4%0A#define T_1 V5%0A#define T_2 V6%0A#define T_3 V7%0A#define T_4 V8%0A%0A// key (r)%0A#define R_0  V9%0A#define R_1  V10%0A#define R_2  V11%0A#define R_3  V12%0A#define R_4  V13%0A#define R5_1 V14%0A#define R5_2 V15%0A#define R5_3 V16%0A#define R5_4 V17%0A#define RSAVE_0 R5%0A#define RSAVE_1 R6%0A#define RSAVE_2 R7%0A#define RSAVE_3 R8%0A#define RSAVE_4 R9%0A#define R5SAVE_1 V28%0A#define R5SAVE_2 V29%0A#define R5SAVE_3 V30%0A#define R5SAVE_4 V31%0A%0A// message block%0A#define F_0 V18%0A#define F_1 V19%0A#define F_2 V20%0A#define F_3 V21%0A#define F_4 V22%0A%0A// accumulator%0A#define H_0 V23%0A#define H_1 V24%0A#define H_2 V25%0A#define H_3 V26%0A#define H_4 V27%0A%0AGLOBL %C2%B7keyMask%3C%3E(SB), RODATA, $16%0ADATA %C2%B7keyMask%3C%3E+0(SB)/8, $0xffffff0ffcffff0f%0ADATA %C2%B7keyMask%3C%3E+8(SB)/8, $0xfcffff0ffcffff0f%0A%0AGLOBL %C2%B7bswapMask%3C%3E(SB), RODATA, $16%0ADATA %C2%B7bswapMask%3C%3E+0(SB)/8, $0x0f0e0d0c0b0a0908%0ADATA %C2%B7bswapMask%3C%3E+8(SB)/8, $0x0706050403020100%0A%0AGLOBL %C2%B7constants%3C%3E(SB), RODATA, $64%0A// MOD26%0ADATA %C2%B7constants%3C%3E+0(SB)/8, $0x3ffffff%0ADATA %C2%B7constants%3C%3E+8(SB)/8, $0x3ffffff%0A// EX0%0ADATA %C2%B7constants%3C%3E+16(SB)/8, $0x0006050403020100%0ADATA %C2%B7constants%3C%3E+24(SB)/8, $0x1016151413121110%0A// EX1%0ADATA %C2%B7constants%3C%3E+32(SB)/8, $0x060c0b0a09080706%0ADATA %C2%B7constants%3C%3E+40(SB)/8, $0x161c1b1a19181716%0A// EX2%0ADATA %C2%B7constants%3C%3E+48(SB)/8, $0x0d0d0d0d0d0f0e0d%0ADATA %C2%B7constants%3C%3E+56(SB)/8, $0x1d1d1d1d1d1f1e1d%0A%0A// h = (f*g) %25 (2**130-5) %5Bpartial reduction%5D%0A#define MULTIPLY(f0, f1, f2, f3, f4, g0, g1, g2, g3, g4, g51, g52, g53, g54, h0, h1, h2, h3, h4) %5C%0A%09VMLOF  f0, g0, h0        %5C%0A%09VMLOF  f0, g1, h1        %5C%0A%09VMLOF  f0, g2, h2        %5C%0A%09VMLOF  f0, g3, h3        %5C%0A%09VMLOF  f0, g4, h4        %5C%0A%09VMLOF  f1, g54, T_0      %5C%0A%09VMLOF  f1, g0, T_1       %5C%0A%09VMLOF  f1, g1, T_2       %5C%0A%09VMLOF  f1, g2, T_3       %5C%0A%09VMLOF  f1, g3, T_4       %5C%0A%09VMALOF f2, g53, h0, h0   %5C%0A%09VMALOF f2, g54, h1, h1   %5C%0A%09VMALOF f2, g0, h2, h2    %5C%0A%09VMALOF f2, g1, h3, h3    %5C%0A%09VMALOF f2, g2, h4, h4    %5C%0A%09VMALOF f3, g52, T_0, T_0 %5C%0A%09VMALOF f3, g53, T_1, T_1 %5C%0A%09VMALOF f3, g54, T_2, T_2 %5C%0A%09VMALOF f3, g0, T_3, T_3  %5C%0A%09VMALOF f3, g1, T_4, T_4  %5C%0A%09VMALOF f4, g51, h0, h0   %5C%0A%09VMALOF f4, g52, h1, h1   %5C%0A%09VMALOF f4, g53, h2, h2   %5C%0A%09VMALOF f4, g54, h3, h3   %5C%0A%09VMALOF f4, g0, h4, h4    %5C%0A%09VAG    T_0, h0, h0       %5C%0A%09VAG    T_1, h1, h1       %5C%0A%09VAG    T_2, h2, h2       %5C%0A%09VAG    T_3, h3, h3       %5C%0A%09VAG    T_4, h4, h4%0A%0A// carry h0-%3Eh1 h3-%3Eh4, h1-%3Eh2 h4-%3Eh0, h0-%3Eh1 h2-%3Eh3, h3-%3Eh4%0A#define REDUCE(h0, h1, h2, h3, h4) %5C%0A%09VESRLG $26, h0, T_0  %5C%0A%09VESRLG $26, h3, T_1  %5C%0A%09VN     MOD26, h0, h0 %5C%0A%09VN     MOD26, h3, h3 %5C%0A%09VAG    T_0, h1, h1   %5C%0A%09VAG    T_1, h4, h4   %5C%0A%09VESRLG $26, h1, T_2  %5C%0A%09VESRLG $26, h4, T_3  %5C%0A%09VN     MOD26, h1, h1 %5C%0A%09VN     MOD26, h4, h4 %5C%0A%09VESLG  $2, T_3, T_4  %5C%0A%09VAG    T_3, T_4, T_4 %5C%0A%09VAG    T_2, h2, h2   %5C%0A%09VAG    T_4, h0, h0   %5C%0A%09VESRLG $26, h2, T_0  %5C%0A%09VESRLG $26, h0, T_1  %5C%0A%09VN     MOD26, h2, h2 %5C%0A%09VN     MOD26, h0, h0 %5C%0A%09VAG    T_0, h3, h3   %5C%0A%09VAG    T_1, h1, h1   %5C%0A%09VESRLG $26, h3, T_2  %5C%0A%09VN     MOD26, h3, h3 %5C%0A%09VAG    T_2, h4, h4%0A%0A// expand in0 into d%5B0%5D and in1 into d%5B1%5D%0A#define EXPAND(in0, in1, d0, d1, d2, d3, d4) %5C%0A%09VGBM   $0x0707, d1       %5C // d1=tmp%0A%09VPERM  in0, in1, EX2, d4 %5C%0A%09VPERM  in0, in1, EX0, d0 %5C%0A%09VPERM  in0, in1, EX1, d2 %5C%0A%09VN     d1, d4, d4        %5C%0A%09VESRLG $26, d0, d1       %5C%0A%09VESRLG $30, d2, d3       %5C%0A%09VESRLG $4, d2, d2        %5C%0A%09VN     MOD26, d0, d0     %5C%0A%09VN     MOD26, d1, d1     %5C%0A%09VN     MOD26, d2, d2     %5C%0A%09VN     MOD26, d3, d3%0A%0A// pack h4:h0 into h1:h0 (no carry)%0A#define PACK(h0, h1, h2, h3, h4) %5C%0A%09VESLG $26, h1, h1  %5C%0A%09VESLG $26, h3, h3  %5C%0A%09VO    h0, h1, h0   %5C%0A%09VO    h2, h3, h2   %5C%0A%09VESLG $4, h2, h2   %5C%0A%09VLEIB $7, $48, h1  %5C%0A%09VSLB  h1, h2, h2   %5C%0A%09VO    h0, h2, h0   %5C%0A%09VLEIB $7, $104, h1 %5C%0A%09VSLB  h1, h4, h3   %5C%0A%09VO    h3, h0, h0   %5C%0A%09VLEIB $7, $24, h1  %5C%0A%09VSRLB h1, h4, h1%0A%0A// if h %3E 2**130-5 then h -= 2**130-5%0A#define MOD(h0, h1, t0, t1, t2) %5C%0A%09VZERO t0          %5C%0A%09VLEIG $1, $5, t0  %5C%0A%09VACCQ h0, t0, t1  %5C%0A%09VAQ   h0, t0, t0  %5C%0A%09VONE  t2          %5C%0A%09VLEIG $1, $-4, t2 %5C%0A%09VAQ   t2, t1, t1  %5C%0A%09VACCQ h1, t1, t1  %5C%0A%09VONE  t2          %5C%0A%09VAQ   t2, t1, t1  %5C%0A%09VN    h0, t1, t2  %5C%0A%09VNC   t0, t1, t1  %5C%0A%09VO    t1, t2, h0%0A%0A// func poly1305vx(out *%5B16%5Dbyte, m *byte, mlen uint64, key *%5B32%5Dkey)%0ATEXT %C2%B7poly1305vx(SB), $0-32%0A%09// This code processes up to 2 blocks (32 bytes) per iteration%0A%09// using the algorithm described in:%0A%09// NEON crypto, Daniel J. Bernstein & Peter Schwabe%0A%09// https://cryptojedi.org/papers/neoncrypto-20120320.pdf%0A%09LMG out+0(FP), R1, R4 // R1=out, R2=m, R3=mlen, R4=key%0A%0A%09// load MOD26, EX0, EX1 and EX2%0A%09MOVD $%C2%B7constants%3C%3E(SB), R5%0A%09VLM  (R5), MOD26, EX2%0A%0A%09// setup r%0A%09VL   (R4), T_0%0A%09MOVD $%C2%B7keyMask%3C%3E(SB), R6%0A%09VL   (R6), T_1%0A%09VN   T_0, T_1, T_0%0A%09EXPAND(T_0, T_0, R_0, R_1, R_2, R_3, R_4)%0A%0A%09// setup r*5%0A%09VLEIG $0, $5, T_0%0A%09VLEIG $1, $5, T_0%0A%0A%09// store r (for final block)%0A%09VMLOF T_0, R_1, R5SAVE_1%0A%09VMLOF T_0, R_2, R5SAVE_2%0A%09VMLOF T_0, R_3, R5SAVE_3%0A%09VMLOF T_0, R_4, R5SAVE_4%0A%09VLGVG $0, R_0, RSAVE_0%0A%09VLGVG $0, R_1, RSAVE_1%0A%09VLGVG $0, R_2, RSAVE_2%0A%09VLGVG $0, R_3, RSAVE_3%0A%09VLGVG $0, R_4, RSAVE_4%0A%0A%09// skip r**2 calculation%0A%09CMPBLE R3, $16, skip%0A%0A%09// calculate r**2%0A%09MULTIPLY(R_0, R_1, R_2, R_3, R_4, R_0, R_1, R_2, R_3, R_4, R5SAVE_1, R5SAVE_2, R5SAVE_3, R5SAVE_4, H_0, H_1, H_2, H_3, H_4)%0A%09REDUCE(H_0, H_1, H_2, H_3, H_4)%0A%09VLEIG $0, $5, T_0%0A%09VLEIG $1, $5, T_0%0A%09VMLOF T_0, H_1, R5_1%0A%09VMLOF T_0, H_2, R5_2%0A%09VMLOF T_0, H_3, R5_3%0A%09VMLOF T_0, H_4, R5_4%0A%09VLR   H_0, R_0%0A%09VLR   H_1, R_1%0A%09VLR   H_2, R_2%0A%09VLR   H_3, R_3%0A%09VLR   H_4, R_4%0A%0A%09// initialize h%0A%09VZERO H_0%0A%09VZERO H_1%0A%09VZERO H_2%0A%09VZERO H_3%0A%09VZERO H_4%0A%0Aloop:%0A%09CMPBLE R3, $32, b2%0A%09VLM    (R2), T_0, T_1%0A%09SUB    $32, R3%0A%09MOVD   $32(R2), R2%0A%09EXPAND(T_0, T_1, F_0, F_1, F_2, F_3, F_4)%0A%09VLEIB  $4, $1, F_4%0A%09VLEIB  $12, $1, F_4%0A%0Amultiply:%0A%09VAG    H_0, F_0, F_0%0A%09VAG    H_1, F_1, F_1%0A%09VAG    H_2, F_2, F_2%0A%09VAG    H_3, F_3, F_3%0A%09VAG    H_4, F_4, F_4%0A%09MULTIPLY(F_0, F_1, F_2, F_3, F_4, R_0, R_1, R_2, R_3, R_4, R5_1, R5_2, R5_3, R5_4, H_0, H_1, H_2, H_3, H_4)%0A%09REDUCE(H_0, H_1, H_2, H_3, H_4)%0A%09CMPBNE R3, $0, loop%0A%0Afinish:%0A%09// sum vectors%0A%09VZERO  T_0%0A%09VSUMQG H_0, T_0, H_0%0A%09VSUMQG H_1, T_0, H_1%0A%09VSUMQG H_2, T_0, H_2%0A%09VSUMQG H_3, T_0, H_3%0A%09VSUMQG H_4, T_0, H_4%0A%0A%09// h may be %3E= 2*(2**130-5) so we need to reduce it again%0A%09REDUCE(H_0, H_1, H_2, H_3, H_4)%0A%0A%09// carry h1-%3Eh4%0A%09VESRLG $26, H_1, T_1%0A%09VN     MOD26, H_1, H_1%0A%09VAQ    T_1, H_2, H_2%0A%09VESRLG $26, H_2, T_2%0A%09VN     MOD26, H_2, H_2%0A%09VAQ    T_2, H_3, H_3%0A%09VESRLG $26, H_3, T_3%0A%09VN     MOD26, H_3, H_3%0A%09VAQ    T_3, H_4, H_4%0A%0A%09// h is now %3C 2*(2**130-5)%0A%09// pack h into h1 (hi) and h0 (lo)%0A%09PACK(H_0, H_1, H_2, H_3, H_4)%0A%0A%09// if h %3E 2**130-5 then h -= 2**130-5%0A%09MOD(H_0, H_1, T_0, T_1, T_2)%0A%0A%09// h += s%0A%09MOVD  $%C2%B7bswapMask%3C%3E(SB), R5%0A%09VL    (R5), T_1%0A%09VL    16(R4), T_0%0A%09VPERM T_0, T_0, T_1, T_0    // reverse bytes (to big)%0A%09VAQ   T_0, H_0, H_0%0A%09VPERM H_0, H_0, T_1, H_0    // reverse bytes (to little)%0A%09VST   H_0, (R1)%0A%0A%09RET%0A%0Ab2:%0A%09CMPBLE R3, $16, b1%0A%0A%09// 2 blocks remaining%0A%09SUB    $17, R3%0A%09VL     (R2), T_0%0A%09VLL    R3, 16(R2), T_1%0A%09ADD    $1, R3%0A%09MOVBZ  $1, R0%0A%09CMPBEQ R3, $16, 2(PC)%0A%09VLVGB  R3, R0, T_1%0A%09EXPAND(T_0, T_1, F_0, F_1, F_2, F_3, F_4)%0A%09CMPBNE R3, $16, 2(PC)%0A%09VLEIB  $12, $1, F_4%0A%09VLEIB  $4, $1, F_4%0A%0A%09// setup %5Br%C2%B2,r%5D%0A%09VLVGG $1, RSAVE_0, R_0%0A%09VLVGG $1, RSAVE_1, R_1%0A%09VLVGG $1, RSAVE_2, R_2%0A%09VLVGG $1, RSAVE_3, R_3%0A%09VLVGG $1, RSAVE_4, R_4%0A%09VPDI  $0, R5_1, R5SAVE_1, R5_1%0A%09VPDI  $0, R5_2, R5SAVE_2, R5_2%0A%09VPDI  $0, R5_3, R5SAVE_3, R5_3%0A%09VPDI  $0, R5_4, R5SAVE_4, R5_4%0A%0A%09MOVD $0, R3%0A%09BR   multiply%0A%0Askip:%0A%09VZERO H_0%0A%09VZERO H_1%0A%09VZERO H_2%0A%09VZERO H_3%0A%09VZERO H_4%0A%0A%09CMPBEQ R3, $0, finish%0A%0Ab1:%0A%09// 1 block remaining%0A%09SUB    $1, R3%0A%09VLL    R3, (R2), T_0%0A%09ADD    $1, R3%0A%09MOVBZ  $1, R0%0A%09CMPBEQ R3, $16, 2(PC)%0A%09VLVGB  R3, R0, T_0%0A%09VZERO  T_1%0A%09EXPAND(T_0, T_1, F_0, F_1, F_2, F_3, F_4)%0A%09CMPBNE R3, $16, 2(PC)%0A%09VLEIB  $4, $1, F_4%0A%09VLEIG  $1, $1, R_0%0A%09VZERO  R_1%0A%09VZERO  R_2%0A%09VZERO  R_3%0A%09VZERO  R_4%0A%09VZERO  R5_1%0A%09VZERO  R5_2%0A%09VZERO  R5_3%0A%09VZERO  R5_4%0A%0A%09// setup %5Br, 1%5D%0A%09VLVGG $0, RSAVE_0, R_0%0A%09VLVGG $0, RSAVE_1, R_1%0A%09VLVGG $0, RSAVE_2, R_2%0A%09VLVGG $0, RSAVE_3, R_3%0A%09VLVGG $0, RSAVE_4, R_4%0A%09VPDI  $0, R5SAVE_1, R5_1, R5_1%0A%09VPDI  $0, R5SAVE_2, R5_2, R5_2%0A%09VPDI  $0, R5SAVE_3, R5_3, R5_3%0A%09VPDI  $0, R5SAVE_4, R5_4, R5_4%0A%0A%09MOVD $0, R3%0A%09BR   multiply%0A%0ATEXT %C2%B7hasVectorFacility(SB), NOSPLIT, $24-1%0A%09MOVD  $x-24(SP), R1%0A%09XC    $24, 0(R1), 0(R1) // clear the storage%0A%09MOVD  $2, R0            // R0 is the number of double words stored -1%0A%09WORD  $0xB2B01000       // STFLE 0(R1)%0A%09XOR   R0, R0            // reset the value of R0%0A%09MOVBZ z-8(SP), R1%0A%09AND   $0x40, R1%0A%09BEQ   novector%0A%0Avectorinstalled:%0A%09// check if the vector instruction has been enabled%0A%09VLEIB  $0, $0xF, V16%0A%09VLGVB  $0, V16, R1%0A%09CMPBNE R1, $0xF, novector%0A%09MOVB   $1, ret+0(FP)      // have vx%0A%09RET%0A%0Anovector:%0A%09MOVB $0, ret+0(FP) // no vx%0A%09RET%0A
+ f 885f2cb8c8bcc6426157bde1d9d5019d9013b0d714a168fd1eda953b1922502f vendor/golang.org/x/crypto/poly1305/sum_vmsl_s390x.s
dmppatch 2
@@ -0,0 +1,25099 @@
+// Copyright 2018 The Go Authors. All rights reserved.%0A// Use of this source code is governed by a BSD-style%0A// license that can be found in the LICENSE file.%0A%0A// +build s390x,go1.11,!gccgo,!appengine%0A%0A#include %22textflag.h%22%0A%0A// Implementation of Poly1305 using the vector facility (vx) and the VMSL instruction.%0A%0A// constants%0A#define EX0   V1%0A#define EX1   V2%0A#define EX2   V3%0A%0A// temporaries%0A#define T_0 V4%0A#define T_1 V5%0A#define T_2 V6%0A#define T_3 V7%0A#define T_4 V8%0A#define T_5 V9%0A#define T_6 V10%0A#define T_7 V11%0A#define T_8 V12%0A#define T_9 V13%0A#define T_10 V14%0A%0A// r**2 & r**4%0A#define R_0  V15%0A#define R_1  V16%0A#define R_2  V17%0A#define R5_1 V18%0A#define R5_2 V19%0A// key (r)%0A#define RSAVE_0 R7%0A#define RSAVE_1 R8%0A#define RSAVE_2 R9%0A#define R5SAVE_1 R10%0A#define R5SAVE_2 R11%0A%0A// message block%0A#define M0 V20%0A#define M1 V21%0A#define M2 V22%0A#define M3 V23%0A#define M4 V24%0A#define M5 V25%0A%0A// accumulator%0A#define H0_0 V26%0A#define H1_0 V27%0A#define H2_0 V28%0A#define H0_1 V29%0A#define H1_1 V30%0A#define H2_1 V31%0A%0AGLOBL %C2%B7keyMask%3C%3E(SB), RODATA, $16%0ADATA %C2%B7keyMask%3C%3E+0(SB)/8, $0xffffff0ffcffff0f%0ADATA %C2%B7keyMask%3C%3E+8(SB)/8, $0xfcffff0ffcffff0f%0A%0AGLOBL %C2%B7bswapMask%3C%3E(SB), RODATA, $16%0ADATA %C2%B7bswapMask%3C%3E+0(SB)/8, $0x0f0e0d0c0b0a0908%0ADATA %C2%B7bswapMask%3C%3E+8(SB)/8, $0x0706050403020100%0A%0AGLOBL %C2%B7constants%3C%3E(SB), RODATA, $48%0A// EX0%0ADATA %C2%B7constants%3C%3E+0(SB)/8, $0x18191a1b1c1d1e1f%0ADATA %C2%B7constants%3C%3E+8(SB)/8, $0x0000050403020100%0A// EX1%0ADATA %C2%B7constants%3C%3E+16(SB)/8, $0x18191a1b1c1d1e1f%0ADATA %C2%B7constants%3C%3E+24(SB)/8, $0x00000a0908070605%0A// EX2%0ADATA %C2%B7constants%3C%3E+32(SB)/8, $0x18191a1b1c1d1e1f%0ADATA %C2%B7constants%3C%3E+40(SB)/8, $0x0000000f0e0d0c0b%0A%0AGLOBL %C2%B7c%3C%3E(SB), RODATA, $48%0A// EX0%0ADATA %C2%B7c%3C%3E+0(SB)/8, $0x0000050403020100%0ADATA %C2%B7c%3C%3E+8(SB)/8, $0x0000151413121110%0A// EX1%0ADATA %C2%B7c%3C%3E+16(SB)/8, $0x00000a0908070605%0ADATA %C2%B7c%3C%3E+24(SB)/8, $0x00001a1918171615%0A// EX2%0ADATA %C2%B7c%3C%3E+32(SB)/8, $0x0000000f0e0d0c0b%0ADATA %C2%B7c%3C%3E+40(SB)/8, $0x0000001f1e1d1c1b%0A%0AGLOBL %C2%B7reduce%3C%3E(SB), RODATA, $32%0A// 44 bit%0ADATA %C2%B7reduce%3C%3E+0(SB)/8, $0x0%0ADATA %C2%B7reduce%3C%3E+8(SB)/8, $0xfffffffffff%0A// 42 bit%0ADATA %C2%B7reduce%3C%3E+16(SB)/8, $0x0%0ADATA %C2%B7reduce%3C%3E+24(SB)/8, $0x3ffffffffff%0A%0A// h = (f*g) %25 (2**130-5) %5Bpartial reduction%5D%0A// uses T_0...T_9 temporary registers%0A// input: m02_0, m02_1, m02_2, m13_0, m13_1, m13_2, r_0, r_1, r_2, r5_1, r5_2, m4_0, m4_1, m4_2, m5_0, m5_1, m5_2%0A// temp: t0, t1, t2, t3, t4, t5, t6, t7, t8, t9%0A// output: m02_0, m02_1, m02_2, m13_0, m13_1, m13_2%0A#define MULTIPLY(m02_0, m02_1, m02_2, m13_0, m13_1, m13_2, r_0, r_1, r_2, r5_1, r5_2, m4_0, m4_1, m4_2, m5_0, m5_1, m5_2, t0, t1, t2, t3, t4, t5, t6, t7, t8, t9) %5C%0A%09%5C // Eliminate the dependency for the last 2 VMSLs%0A%09VMSLG m02_0, r_2, m4_2, m4_2                       %5C%0A%09VMSLG m13_0, r_2, m5_2, m5_2                       %5C // 8 VMSLs pipelined%0A%09VMSLG m02_0, r_0, m4_0, m4_0                       %5C%0A%09VMSLG m02_1, r5_2, V0, T_0                         %5C%0A%09VMSLG m02_0, r_1, m4_1, m4_1                       %5C%0A%09VMSLG m02_1, r_0, V0, T_1                          %5C%0A%09VMSLG m02_1, r_1, V0, T_2                          %5C%0A%09VMSLG m02_2, r5_1, V0, T_3                         %5C%0A%09VMSLG m02_2, r5_2, V0, T_4                         %5C%0A%09VMSLG m13_0, r_0, m5_0, m5_0                       %5C%0A%09VMSLG m13_1, r5_2, V0, T_5                         %5C%0A%09VMSLG m13_0, r_1, m5_1, m5_1                       %5C%0A%09VMSLG m13_1, r_0, V0, T_6                          %5C%0A%09VMSLG m13_1, r_1, V0, T_7                          %5C%0A%09VMSLG m13_2, r5_1, V0, T_8                         %5C%0A%09VMSLG m13_2, r5_2, V0, T_9                         %5C%0A%09VMSLG m02_2, r_0, m4_2, m4_2                       %5C%0A%09VMSLG m13_2, r_0, m5_2, m5_2                       %5C%0A%09VAQ   m4_0, T_0, m02_0                             %5C%0A%09VAQ   m4_1, T_1, m02_1                             %5C%0A%09VAQ   m5_0, T_5, m13_0                             %5C%0A%09VAQ   m5_1, T_6, m13_1                             %5C%0A%09VAQ   m02_0, T_3, m02_0                            %5C%0A%09VAQ   m02_1, T_4, m02_1                            %5C%0A%09VAQ   m13_0, T_8, m13_0                            %5C%0A%09VAQ   m13_1, T_9, m13_1                            %5C%0A%09VAQ   m4_2, T_2, m02_2                             %5C%0A%09VAQ   m5_2, T_7, m13_2                             %5C%0A%0A// SQUARE uses three limbs of r and r_2*5 to output square of r%0A// uses T_1, T_5 and T_7 temporary registers%0A// input: r_0, r_1, r_2, r5_2%0A// temp: TEMP0, TEMP1, TEMP2%0A// output: p0, p1, p2%0A#define SQUARE(r_0, r_1, r_2, r5_2, p0, p1, p2, TEMP0, TEMP1, TEMP2) %5C%0A%09VMSLG r_0, r_0, p0, p0     %5C%0A%09VMSLG r_1, r5_2, V0, TEMP0 %5C%0A%09VMSLG r_2, r5_2, p1, p1    %5C%0A%09VMSLG r_0, r_1, V0, TEMP1  %5C%0A%09VMSLG r_1, r_1, p2, p2     %5C%0A%09VMSLG r_0, r_2, V0, TEMP2  %5C%0A%09VAQ   TEMP0, p0, p0        %5C%0A%09VAQ   TEMP1, p1, p1        %5C%0A%09VAQ   TEMP2, p2, p2        %5C%0A%09VAQ   TEMP0, p0, p0        %5C%0A%09VAQ   TEMP1, p1, p1        %5C%0A%09VAQ   TEMP2, p2, p2        %5C%0A%0A// carry h0-%3Eh1-%3Eh2-%3Eh0 %7C%7C h3-%3Eh4-%3Eh5-%3Eh3%0A// uses T_2, T_4, T_5, T_7, T_8, T_9%0A//       t6,  t7,  t8,  t9, t10, t11%0A// input: h0, h1, h2, h3, h4, h5%0A// temp: t0, t1, t2, t3, t4, t5, t6, t7, t8, t9, t10, t11%0A// output: h0, h1, h2, h3, h4, h5%0A#define REDUCE(h0, h1, h2, h3, h4, h5, t0, t1, t2, t3, t4, t5, t6, t7, t8, t9, t10, t11) %5C%0A%09VLM    (R12), t6, t7  %5C // 44 and 42 bit clear mask%0A%09VLEIB  $7, $0x28, t10 %5C // 5 byte shift mask%0A%09VREPIB $4, t8         %5C // 4 bit shift mask%0A%09VREPIB $2, t11        %5C // 2 bit shift mask%0A%09VSRLB  t10, h0, t0    %5C // h0 byte shift%0A%09VSRLB  t10, h1, t1    %5C // h1 byte shift%0A%09VSRLB  t10, h2, t2    %5C // h2 byte shift%0A%09VSRLB  t10, h3, t3    %5C // h3 byte shift%0A%09VSRLB  t10, h4, t4    %5C // h4 byte shift%0A%09VSRLB  t10, h5, t5    %5C // h5 byte shift%0A%09VSRL   t8, t0, t0     %5C // h0 bit shift%0A%09VSRL   t8, t1, t1     %5C // h2 bit shift%0A%09VSRL   t11, t2, t2    %5C // h2 bit shift%0A%09VSRL   t8, t3, t3     %5C // h3 bit shift%0A%09VSRL   t8, t4, t4     %5C // h4 bit shift%0A%09VESLG  $2, t2, t9     %5C // h2 carry x5%0A%09VSRL   t11, t5, t5    %5C // h5 bit shift%0A%09VN     t6, h0, h0     %5C // h0 clear carry%0A%09VAQ    t2, t9, t2     %5C // h2 carry x5%0A%09VESLG  $2, t5, t9     %5C // h5 carry x5%0A%09VN     t6, h1, h1     %5C // h1 clear carry%0A%09VN     t7, h2, h2     %5C // h2 clear carry%0A%09VAQ    t5, t9, t5     %5C // h5 carry x5%0A%09VN     t6, h3, h3     %5C // h3 clear carry%0A%09VN     t6, h4, h4     %5C // h4 clear carry%0A%09VN     t7, h5, h5     %5C // h5 clear carry%0A%09VAQ    t0, h1, h1     %5C // h0-%3Eh1%0A%09VAQ    t3, h4, h4     %5C // h3-%3Eh4%0A%09VAQ    t1, h2, h2     %5C // h1-%3Eh2%0A%09VAQ    t4, h5, h5     %5C // h4-%3Eh5%0A%09VAQ    t2, h0, h0     %5C // h2-%3Eh0%0A%09VAQ    t5, h3, h3     %5C // h5-%3Eh3%0A%09VREPG  $1, t6, t6     %5C // 44 and 42 bit masks across both halves%0A%09VREPG  $1, t7, t7     %5C%0A%09VSLDB  $8, h0, h0, h0 %5C // set up %5Bh0/1/2, h3/4/5%5D%0A%09VSLDB  $8, h1, h1, h1 %5C%0A%09VSLDB  $8, h2, h2, h2 %5C%0A%09VO     h0, h3, h3     %5C%0A%09VO     h1, h4, h4     %5C%0A%09VO     h2, h5, h5     %5C%0A%09VESRLG $44, h3, t0    %5C // 44 bit shift right%0A%09VESRLG $44, h4, t1    %5C%0A%09VESRLG $42, h5, t2    %5C%0A%09VN     t6, h3, h3     %5C // clear carry bits%0A%09VN     t6, h4, h4     %5C%0A%09VN     t7, h5, h5     %5C%0A%09VESLG  $2, t2, t9     %5C // multiply carry by 5%0A%09VAQ    t9, t2, t2     %5C%0A%09VAQ    t0, h4, h4     %5C%0A%09VAQ    t1, h5, h5     %5C%0A%09VAQ    t2, h3, h3     %5C%0A%0A// carry h0-%3Eh1-%3Eh2-%3Eh0%0A// input: h0, h1, h2%0A// temp: t0, t1, t2, t3, t4, t5, t6, t7, t8%0A// output: h0, h1, h2%0A#define REDUCE2(h0, h1, h2, t0, t1, t2, t3, t4, t5, t6, t7, t8) %5C%0A%09VLEIB  $7, $0x28, t3 %5C // 5 byte shift mask%0A%09VREPIB $4, t4        %5C // 4 bit shift mask%0A%09VREPIB $2, t7        %5C // 2 bit shift mask%0A%09VGBM   $0x003F, t5   %5C // mask to clear carry bits%0A%09VSRLB  t3, h0, t0    %5C%0A%09VSRLB  t3, h1, t1    %5C%0A%09VSRLB  t3, h2, t2    %5C%0A%09VESRLG $4, t5, t5    %5C // 44 bit clear mask%0A%09VSRL   t4, t0, t0    %5C%0A%09VSRL   t4, t1, t1    %5C%0A%09VSRL   t7, t2, t2    %5C%0A%09VESRLG $2, t5, t6    %5C // 42 bit clear mask%0A%09VESLG  $2, t2, t8    %5C%0A%09VAQ    t8, t2, t2    %5C%0A%09VN     t5, h0, h0    %5C%0A%09VN     t5, h1, h1    %5C%0A%09VN     t6, h2, h2    %5C%0A%09VAQ    t0, h1, h1    %5C%0A%09VAQ    t1, h2, h2    %5C%0A%09VAQ    t2, h0, h0    %5C%0A%09VSRLB  t3, h0, t0    %5C%0A%09VSRLB  t3, h1, t1    %5C%0A%09VSRLB  t3, h2, t2    %5C%0A%09VSRL   t4, t0, t0    %5C%0A%09VSRL   t4, t1, t1    %5C%0A%09VSRL   t7, t2, t2    %5C%0A%09VN     t5, h0, h0    %5C%0A%09VN     t5, h1, h1    %5C%0A%09VESLG  $2, t2, t8    %5C%0A%09VN     t6, h2, h2    %5C%0A%09VAQ    t0, h1, h1    %5C%0A%09VAQ    t8, t2, t2    %5C%0A%09VAQ    t1, h2, h2    %5C%0A%09VAQ    t2, h0, h0    %5C%0A%0A// expands two message blocks into the lower halfs of the d registers%0A// moves the contents of the d registers into upper halfs%0A// input: in1, in2, d0, d1, d2, d3, d4, d5%0A// temp: TEMP0, TEMP1, TEMP2, TEMP3%0A// output: d0, d1, d2, d3, d4, d5%0A#define EXPACC(in1, in2, d0, d1, d2, d3, d4, d5, TEMP0, TEMP1, TEMP2, TEMP3) %5C%0A%09VGBM   $0xff3f, TEMP0      %5C%0A%09VGBM   $0xff1f, TEMP1      %5C%0A%09VESLG  $4, d1, TEMP2       %5C%0A%09VESLG  $4, d4, TEMP3       %5C%0A%09VESRLG $4, TEMP0, TEMP0    %5C%0A%09VPERM  in1, d0, EX0, d0    %5C%0A%09VPERM  in2, d3, EX0, d3    %5C%0A%09VPERM  in1, d2, EX2, d2    %5C%0A%09VPERM  in2, d5, EX2, d5    %5C%0A%09VPERM  in1, TEMP2, EX1, d1 %5C%0A%09VPERM  in2, TEMP3, EX1, d4 %5C%0A%09VN     TEMP0, d0, d0       %5C%0A%09VN     TEMP0, d3, d3       %5C%0A%09VESRLG $4, d1, d1          %5C%0A%09VESRLG $4, d4, d4          %5C%0A%09VN     TEMP1, d2, d2       %5C%0A%09VN     TEMP1, d5, d5       %5C%0A%09VN     TEMP0, d1, d1       %5C%0A%09VN     TEMP0, d4, d4       %5C%0A%0A// expands one message block into the lower halfs of the d registers%0A// moves the contents of the d registers into upper halfs%0A// input: in, d0, d1, d2%0A// temp: TEMP0, TEMP1, TEMP2%0A// output: d0, d1, d2%0A#define EXPACC2(in, d0, d1, d2, TEMP0, TEMP1, TEMP2) %5C%0A%09VGBM   $0xff3f, TEMP0     %5C%0A%09VESLG  $4, d1, TEMP2      %5C%0A%09VGBM   $0xff1f, TEMP1     %5C%0A%09VPERM  in, d0, EX0, d0    %5C%0A%09VESRLG $4, TEMP0, TEMP0   %5C%0A%09VPERM  in, d2, EX2, d2    %5C%0A%09VPERM  in, TEMP2, EX1, d1 %5C%0A%09VN     TEMP0, d0, d0      %5C%0A%09VN     TEMP1, d2, d2      %5C%0A%09VESRLG $4, d1, d1         %5C%0A%09VN     TEMP0, d1, d1      %5C%0A%0A// pack h2:h0 into h1:h0 (no carry)%0A// input: h0, h1, h2%0A// output: h0, h1, h2%0A#define PACK(h0, h1, h2) %5C%0A%09VMRLG  h1, h2, h2  %5C // copy h1 to upper half h2%0A%09VESLG  $44, h1, h1 %5C // shift limb 1 44 bits, leaving 20%0A%09VO     h0, h1, h0  %5C // combine h0 with 20 bits from limb 1%0A%09VESRLG $20, h2, h1 %5C // put top 24 bits of limb 1 into h1%0A%09VLEIG  $1, $0, h1  %5C // clear h2 stuff from lower half of h1%0A%09VO     h0, h1, h0  %5C // h0 now has 88 bits (limb 0 and 1)%0A%09VLEIG  $0, $0, h2  %5C // clear upper half of h2%0A%09VESRLG $40, h2, h1 %5C // h1 now has upper two bits of result%0A%09VLEIB  $7, $88, h1 %5C // for byte shift (11 bytes)%0A%09VSLB   h1, h2, h2  %5C // shift h2 11 bytes to the left%0A%09VO     h0, h2, h0  %5C // combine h0 with 20 bits from limb 1%0A%09VLEIG  $0, $0, h1  %5C // clear upper half of h1%0A%0A// if h %3E 2**130-5 then h -= 2**130-5%0A// input: h0, h1%0A// temp: t0, t1, t2%0A// output: h0%0A#define MOD(h0, h1, t0, t1, t2) %5C%0A%09VZERO t0          %5C%0A%09VLEIG $1, $5, t0  %5C%0A%09VACCQ h0, t0, t1  %5C%0A%09VAQ   h0, t0, t0  %5C%0A%09VONE  t2          %5C%0A%09VLEIG $1, $-4, t2 %5C%0A%09VAQ   t2, t1, t1  %5C%0A%09VACCQ h1, t1, t1  %5C%0A%09VONE  t2          %5C%0A%09VAQ   t2, t1, t1  %5C%0A%09VN    h0, t1, t2  %5C%0A%09VNC   t0, t1, t1  %5C%0A%09VO    t1, t2, h0  %5C%0A%0A// func poly1305vmsl(out *%5B16%5Dbyte, m *byte, mlen uint64, key *%5B32%5Dkey)%0ATEXT %C2%B7poly1305vmsl(SB), $0-32%0A%09// This code processes 6 + up to 4 blocks (32 bytes) per iteration%0A%09// using the algorithm described in:%0A%09// NEON crypto, Daniel J. Bernstein & Peter Schwabe%0A%09// https://cryptojedi.org/papers/neoncrypto-20120320.pdf%0A%09// And as moddified for VMSL as described in%0A%09// Accelerating Poly1305 Cryptographic Message Authentication on the z14%0A%09// O'Farrell et al, CASCON 2017, p48-55%0A%09// https://ibm.ent.box.com/s/jf9gedj0e9d2vjctfyh186shaztavnht%0A%0A%09LMG   out+0(FP), R1, R4 // R1=out, R2=m, R3=mlen, R4=key%0A%09VZERO V0                // c%0A%0A%09// load EX0, EX1 and EX2%0A%09MOVD $%C2%B7constants%3C%3E(SB), R5%0A%09VLM  (R5), EX0, EX2        // c%0A%0A%09// setup r%0A%09VL    (R4), T_0%0A%09MOVD  $%C2%B7keyMask%3C%3E(SB), R6%0A%09VL    (R6), T_1%0A%09VN    T_0, T_1, T_0%0A%09VZERO T_2                 // limbs for r%0A%09VZERO T_3%0A%09VZERO T_4%0A%09EXPACC2(T_0, T_2, T_3, T_4, T_1, T_5, T_7)%0A%0A%09// T_2, T_3, T_4: %5B0, r%5D%0A%0A%09// setup r*20%0A%09VLEIG $0, $0, T_0%0A%09VLEIG $1, $20, T_0       // T_0: %5B0, 20%5D%0A%09VZERO T_5%0A%09VZERO T_6%0A%09VMSLG T_0, T_3, T_5, T_5%0A%09VMSLG T_0, T_4, T_6, T_6%0A%0A%09// store r for final block in GR%0A%09VLGVG $1, T_2, RSAVE_0  // c%0A%09VLGVG $1, T_3, RSAVE_1  // c%0A%09VLGVG $1, T_4, RSAVE_2  // c%0A%09VLGVG $1, T_5, R5SAVE_1 // c%0A%09VLGVG $1, T_6, R5SAVE_2 // c%0A%0A%09// initialize h%0A%09VZERO H0_0%0A%09VZERO H1_0%0A%09VZERO H2_0%0A%09VZERO H0_1%0A%09VZERO H1_1%0A%09VZERO H2_1%0A%0A%09// initialize pointer for reduce constants%0A%09MOVD $%C2%B7reduce%3C%3E(SB), R12%0A%0A%09// calculate r**2 and 20*(r**2)%0A%09VZERO R_0%0A%09VZERO R_1%0A%09VZERO R_2%0A%09SQUARE(T_2, T_3, T_4, T_6, R_0, R_1, R_2, T_1, T_5, T_7)%0A%09REDUCE2(R_0, R_1, R_2, M0, M1, M2, M3, M4, R5_1, R5_2, M5, T_1)%0A%09VZERO R5_1%0A%09VZERO R5_2%0A%09VMSLG T_0, R_1, R5_1, R5_1%0A%09VMSLG T_0, R_2, R5_2, R5_2%0A%0A%09// skip r**4 calculation if 3 blocks or less%0A%09CMPBLE R3, $48, b4%0A%0A%09// calculate r**4 and 20*(r**4)%0A%09VZERO T_8%0A%09VZERO T_9%0A%09VZERO T_10%0A%09SQUARE(R_0, R_1, R_2, R5_2, T_8, T_9, T_10, T_1, T_5, T_7)%0A%09REDUCE2(T_8, T_9, T_10, M0, M1, M2, M3, M4, T_2, T_3, M5, T_1)%0A%09VZERO T_2%0A%09VZERO T_3%0A%09VMSLG T_0, T_9, T_2, T_2%0A%09VMSLG T_0, T_10, T_3, T_3%0A%0A%09// put r**2 to the right and r**4 to the left of R_0, R_1, R_2%0A%09VSLDB $8, T_8, T_8, T_8%0A%09VSLDB $8, T_9, T_9, T_9%0A%09VSLDB $8, T_10, T_10, T_10%0A%09VSLDB $8, T_2, T_2, T_2%0A%09VSLDB $8, T_3, T_3, T_3%0A%0A%09VO T_8, R_0, R_0%0A%09VO T_9, R_1, R_1%0A%09VO T_10, R_2, R_2%0A%09VO T_2, R5_1, R5_1%0A%09VO T_3, R5_2, R5_2%0A%0A%09CMPBLE R3, $80, load // less than or equal to 5 blocks in message%0A%0A%09// 6(or 5+1) blocks%0A%09SUB    $81, R3%0A%09VLM    (R2), M0, M4%0A%09VLL    R3, 80(R2), M5%0A%09ADD    $1, R3%0A%09MOVBZ  $1, R0%0A%09CMPBGE R3, $16, 2(PC)%0A%09VLVGB  R3, R0, M5%0A%09MOVD   $96(R2), R2%0A%09EXPACC(M0, M1, H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, T_0, T_1, T_2, T_3)%0A%09EXPACC(M2, M3, H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, T_0, T_1, T_2, T_3)%0A%09VLEIB  $2, $1, H2_0%0A%09VLEIB  $2, $1, H2_1%0A%09VLEIB  $10, $1, H2_0%0A%09VLEIB  $10, $1, H2_1%0A%0A%09VZERO  M0%0A%09VZERO  M1%0A%09VZERO  M2%0A%09VZERO  M3%0A%09VZERO  T_4%0A%09VZERO  T_10%0A%09EXPACC(M4, M5, M0, M1, M2, M3, T_4, T_10, T_0, T_1, T_2, T_3)%0A%09VLR    T_4, M4%0A%09VLEIB  $10, $1, M2%0A%09CMPBLT R3, $16, 2(PC)%0A%09VLEIB  $10, $1, T_10%0A%09MULTIPLY(H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, R_0, R_1, R_2, R5_1, R5_2, M0, M1, M2, M3, M4, T_10, T_0, T_1, T_2, T_3, T_4, T_5, T_6, T_7, T_8, T_9)%0A%09REDUCE(H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, T_10, M0, M1, M2, M3, M4, T_4, T_5, T_2, T_7, T_8, T_9)%0A%09VMRHG  V0, H0_1, H0_0%0A%09VMRHG  V0, H1_1, H1_0%0A%09VMRHG  V0, H2_1, H2_0%0A%09VMRLG  V0, H0_1, H0_1%0A%09VMRLG  V0, H1_1, H1_1%0A%09VMRLG  V0, H2_1, H2_1%0A%0A%09SUB    $16, R3%0A%09CMPBLE R3, $0, square%0A%0Aload:%0A%09// load EX0, EX1 and EX2%0A%09MOVD $%C2%B7c%3C%3E(SB), R5%0A%09VLM  (R5), EX0, EX2%0A%0Aloop:%0A%09CMPBLE R3, $64, add // b4%09// last 4 or less blocks left%0A%0A%09// next 4 full blocks%0A%09VLM  (R2), M2, M5%0A%09SUB  $64, R3%0A%09MOVD $64(R2), R2%0A%09REDUCE(H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, T_10, M0, M1, T_0, T_1, T_3, T_4, T_5, T_2, T_7, T_8, T_9)%0A%0A%09// expacc in-lined to create %5Bm2, m3%5D limbs%0A%09VGBM   $0x3f3f, T_0     // 44 bit clear mask%0A%09VGBM   $0x1f1f, T_1     // 40 bit clear mask%0A%09VPERM  M2, M3, EX0, T_3%0A%09VESRLG $4, T_0, T_0     // 44 bit clear mask ready%0A%09VPERM  M2, M3, EX1, T_4%0A%09VPERM  M2, M3, EX2, T_5%0A%09VN     T_0, T_3, T_3%0A%09VESRLG $4, T_4, T_4%0A%09VN     T_1, T_5, T_5%0A%09VN     T_0, T_4, T_4%0A%09VMRHG  H0_1, T_3, H0_0%0A%09VMRHG  H1_1, T_4, H1_0%0A%09VMRHG  H2_1, T_5, H2_0%0A%09VMRLG  H0_1, T_3, H0_1%0A%09VMRLG  H1_1, T_4, H1_1%0A%09VMRLG  H2_1, T_5, H2_1%0A%09VLEIB  $10, $1, H2_0%0A%09VLEIB  $10, $1, H2_1%0A%09VPERM  M4, M5, EX0, T_3%0A%09VPERM  M4, M5, EX1, T_4%0A%09VPERM  M4, M5, EX2, T_5%0A%09VN     T_0, T_3, T_3%0A%09VESRLG $4, T_4, T_4%0A%09VN     T_1, T_5, T_5%0A%09VN     T_0, T_4, T_4%0A%09VMRHG  V0, T_3, M0%0A%09VMRHG  V0, T_4, M1%0A%09VMRHG  V0, T_5, M2%0A%09VMRLG  V0, T_3, M3%0A%09VMRLG  V0, T_4, M4%0A%09VMRLG  V0, T_5, M5%0A%09VLEIB  $10, $1, M2%0A%09VLEIB  $10, $1, M5%0A%0A%09MULTIPLY(H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, R_0, R_1, R_2, R5_1, R5_2, M0, M1, M2, M3, M4, M5, T_0, T_1, T_2, T_3, T_4, T_5, T_6, T_7, T_8, T_9)%0A%09CMPBNE R3, $0, loop%0A%09REDUCE(H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, T_10, M0, M1, M3, M4, M5, T_4, T_5, T_2, T_7, T_8, T_9)%0A%09VMRHG  V0, H0_1, H0_0%0A%09VMRHG  V0, H1_1, H1_0%0A%09VMRHG  V0, H2_1, H2_0%0A%09VMRLG  V0, H0_1, H0_1%0A%09VMRLG  V0, H1_1, H1_1%0A%09VMRLG  V0, H2_1, H2_1%0A%0A%09// load EX0, EX1, EX2%0A%09MOVD $%C2%B7constants%3C%3E(SB), R5%0A%09VLM  (R5), EX0, EX2%0A%0A%09// sum vectors%0A%09VAQ H0_0, H0_1, H0_0%0A%09VAQ H1_0, H1_1, H1_0%0A%09VAQ H2_0, H2_1, H2_0%0A%0A%09// h may be %3E= 2*(2**130-5) so we need to reduce it again%0A%09// M0...M4 are used as temps here%0A%09REDUCE2(H0_0, H1_0, H2_0, M0, M1, M2, M3, M4, T_9, T_10, H0_1, M5)%0A%0Anext:  // carry h1-%3Eh2%0A%09VLEIB  $7, $0x28, T_1%0A%09VREPIB $4, T_2%0A%09VGBM   $0x003F, T_3%0A%09VESRLG $4, T_3%0A%0A%09// byte shift%0A%09VSRLB T_1, H1_0, T_4%0A%0A%09// bit shift%0A%09VSRL T_2, T_4, T_4%0A%0A%09// clear h1 carry bits%0A%09VN T_3, H1_0, H1_0%0A%0A%09// add carry%0A%09VAQ T_4, H2_0, H2_0%0A%0A%09// h is now %3C 2*(2**130-5)%0A%09// pack h into h1 (hi) and h0 (lo)%0A%09PACK(H0_0, H1_0, H2_0)%0A%0A%09// if h %3E 2**130-5 then h -= 2**130-5%0A%09MOD(H0_0, H1_0, T_0, T_1, T_2)%0A%0A%09// h += s%0A%09MOVD  $%C2%B7bswapMask%3C%3E(SB), R5%0A%09VL    (R5), T_1%0A%09VL    16(R4), T_0%0A%09VPERM T_0, T_0, T_1, T_0    // reverse bytes (to big)%0A%09VAQ   T_0, H0_0, H0_0%0A%09VPERM H0_0, H0_0, T_1, H0_0 // reverse bytes (to little)%0A%09VST   H0_0, (R1)%0A%09RET%0A%0Aadd:%0A%09// load EX0, EX1, EX2%0A%09MOVD $%C2%B7constants%3C%3E(SB), R5%0A%09VLM  (R5), EX0, EX2%0A%0A%09REDUCE(H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, T_10, M0, M1, M3, M4, M5, T_4, T_5, T_2, T_7, T_8, T_9)%0A%09VMRHG  V0, H0_1, H0_0%0A%09VMRHG  V0, H1_1, H1_0%0A%09VMRHG  V0, H2_1, H2_0%0A%09VMRLG  V0, H0_1, H0_1%0A%09VMRLG  V0, H1_1, H1_1%0A%09VMRLG  V0, H2_1, H2_1%0A%09CMPBLE R3, $64, b4%0A%0Ab4:%0A%09CMPBLE R3, $48, b3 // 3 blocks or less%0A%0A%09// 4(3+1) blocks remaining%0A%09SUB    $49, R3%0A%09VLM    (R2), M0, M2%0A%09VLL    R3, 48(R2), M3%0A%09ADD    $1, R3%0A%09MOVBZ  $1, R0%0A%09CMPBEQ R3, $16, 2(PC)%0A%09VLVGB  R3, R0, M3%0A%09MOVD   $64(R2), R2%0A%09EXPACC(M0, M1, H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, T_0, T_1, T_2, T_3)%0A%09VLEIB  $10, $1, H2_0%0A%09VLEIB  $10, $1, H2_1%0A%09VZERO  M0%0A%09VZERO  M1%0A%09VZERO  M4%0A%09VZERO  M5%0A%09VZERO  T_4%0A%09VZERO  T_10%0A%09EXPACC(M2, M3, M0, M1, M4, M5, T_4, T_10, T_0, T_1, T_2, T_3)%0A%09VLR    T_4, M2%0A%09VLEIB  $10, $1, M4%0A%09CMPBNE R3, $16, 2(PC)%0A%09VLEIB  $10, $1, T_10%0A%09MULTIPLY(H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, R_0, R_1, R_2, R5_1, R5_2, M0, M1, M4, M5, M2, T_10, T_0, T_1, T_2, T_3, T_4, T_5, T_6, T_7, T_8, T_9)%0A%09REDUCE(H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, T_10, M0, M1, M3, M4, M5, T_4, T_5, T_2, T_7, T_8, T_9)%0A%09VMRHG  V0, H0_1, H0_0%0A%09VMRHG  V0, H1_1, H1_0%0A%09VMRHG  V0, H2_1, H2_0%0A%09VMRLG  V0, H0_1, H0_1%0A%09VMRLG  V0, H1_1, H1_1%0A%09VMRLG  V0, H2_1, H2_1%0A%09SUB    $16, R3%0A%09CMPBLE R3, $0, square // this condition must always hold true!%0A%0Ab3:%0A%09CMPBLE R3, $32, b2%0A%0A%09// 3 blocks remaining%0A%0A%09// setup %5Br%C2%B2,r%5D%0A%09VSLDB $8, R_0, R_0, R_0%0A%09VSLDB $8, R_1, R_1, R_1%0A%09VSLDB $8, R_2, R_2, R_2%0A%09VSLDB $8, R5_1, R5_1, R5_1%0A%09VSLDB $8, R5_2, R5_2, R5_2%0A%0A%09VLVGG $1, RSAVE_0, R_0%0A%09VLVGG $1, RSAVE_1, R_1%0A%09VLVGG $1, RSAVE_2, R_2%0A%09VLVGG $1, R5SAVE_1, R5_1%0A%09VLVGG $1, R5SAVE_2, R5_2%0A%0A%09// setup %5Bh0, h1%5D%0A%09VSLDB $8, H0_0, H0_0, H0_0%0A%09VSLDB $8, H1_0, H1_0, H1_0%0A%09VSLDB $8, H2_0, H2_0, H2_0%0A%09VO    H0_1, H0_0, H0_0%0A%09VO    H1_1, H1_0, H1_0%0A%09VO    H2_1, H2_0, H2_0%0A%09VZERO H0_1%0A%09VZERO H1_1%0A%09VZERO H2_1%0A%0A%09VZERO M0%0A%09VZERO M1%0A%09VZERO M2%0A%09VZERO M3%0A%09VZERO M4%0A%09VZERO M5%0A%0A%09// H*%5Br**2, r%5D%0A%09MULTIPLY(H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, R_0, R_1, R_2, R5_1, R5_2, M0, M1, M2, M3, M4, M5, T_0, T_1, T_2, T_3, T_4, T_5, T_6, T_7, T_8, T_9)%0A%09REDUCE2(H0_0, H1_0, H2_0, M0, M1, M2, M3, M4, H0_1, H1_1, T_10, M5)%0A%0A%09SUB    $33, R3%0A%09VLM    (R2), M0, M1%0A%09VLL    R3, 32(R2), M2%0A%09ADD    $1, R3%0A%09MOVBZ  $1, R0%0A%09CMPBEQ R3, $16, 2(PC)%0A%09VLVGB  R3, R0, M2%0A%0A%09// H += m0%0A%09VZERO T_1%0A%09VZERO T_2%0A%09VZERO T_3%0A%09EXPACC2(M0, T_1, T_2, T_3, T_4, T_5, T_6)%0A%09VLEIB $10, $1, T_3%0A%09VAG   H0_0, T_1, H0_0%0A%09VAG   H1_0, T_2, H1_0%0A%09VAG   H2_0, T_3, H2_0%0A%0A%09VZERO M0%0A%09VZERO M3%0A%09VZERO M4%0A%09VZERO M5%0A%09VZERO T_10%0A%0A%09// (H+m0)*r%0A%09MULTIPLY(H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, R_0, R_1, R_2, R5_1, R5_2, M0, M3, M4, M5, V0, T_10, T_0, T_1, T_2, T_3, T_4, T_5, T_6, T_7, T_8, T_9)%0A%09REDUCE2(H0_0, H1_0, H2_0, M0, M3, M4, M5, T_10, H0_1, H1_1, H2_1, T_9)%0A%0A%09// H += m1%0A%09VZERO V0%0A%09VZERO T_1%0A%09VZERO T_2%0A%09VZERO T_3%0A%09EXPACC2(M1, T_1, T_2, T_3, T_4, T_5, T_6)%0A%09VLEIB $10, $1, T_3%0A%09VAQ   H0_0, T_1, H0_0%0A%09VAQ   H1_0, T_2, H1_0%0A%09VAQ   H2_0, T_3, H2_0%0A%09REDUCE2(H0_0, H1_0, H2_0, M0, M3, M4, M5, T_9, H0_1, H1_1, H2_1, T_10)%0A%0A%09// %5BH, m2%5D * %5Br**2, r%5D%0A%09EXPACC2(M2, H0_0, H1_0, H2_0, T_1, T_2, T_3)%0A%09CMPBNE R3, $16, 2(PC)%0A%09VLEIB  $10, $1, H2_0%0A%09VZERO  M0%0A%09VZERO  M1%0A%09VZERO  M2%0A%09VZERO  M3%0A%09VZERO  M4%0A%09VZERO  M5%0A%09MULTIPLY(H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, R_0, R_1, R_2, R5_1, R5_2, M0, M1, M2, M3, M4, M5, T_0, T_1, T_2, T_3, T_4, T_5, T_6, T_7, T_8, T_9)%0A%09REDUCE2(H0_0, H1_0, H2_0, M0, M1, M2, M3, M4, H0_1, H1_1, M5, T_10)%0A%09SUB    $16, R3%0A%09CMPBLE R3, $0, next   // this condition must always hold true!%0A%0Ab2:%0A%09CMPBLE R3, $16, b1%0A%0A%09// 2 blocks remaining%0A%0A%09// setup %5Br%C2%B2,r%5D%0A%09VSLDB $8, R_0, R_0, R_0%0A%09VSLDB $8, R_1, R_1, R_1%0A%09VSLDB $8, R_2, R_2, R_2%0A%09VSLDB $8, R5_1, R5_1, R5_1%0A%09VSLDB $8, R5_2, R5_2, R5_2%0A%0A%09VLVGG $1, RSAVE_0, R_0%0A%09VLVGG $1, RSAVE_1, R_1%0A%09VLVGG $1, RSAVE_2, R_2%0A%09VLVGG $1, R5SAVE_1, R5_1%0A%09VLVGG $1, R5SAVE_2, R5_2%0A%0A%09// setup %5Bh0, h1%5D%0A%09VSLDB $8, H0_0, H0_0, H0_0%0A%09VSLDB $8, H1_0, H1_0, H1_0%0A%09VSLDB $8, H2_0, H2_0, H2_0%0A%09VO    H0_1, H0_0, H0_0%0A%09VO    H1_1, H1_0, H1_0%0A%09VO    H2_1, H2_0, H2_0%0A%09VZERO H0_1%0A%09VZERO H1_1%0A%09VZERO H2_1%0A%0A%09VZERO M0%0A%09VZERO M1%0A%09VZERO M2%0A%09VZERO M3%0A%09VZERO M4%0A%09VZERO M5%0A%0A%09// H*%5Br**2, r%5D%0A%09MULTIPLY(H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, R_0, R_1, R_2, R5_1, R5_2, M0, M1, M2, M3, M4, M5, T_0, T_1, T_2, T_3, T_4, T_5, T_6, T_7, T_8, T_9)%0A%09REDUCE(H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, T_10, M0, M1, M2, M3, M4, T_4, T_5, T_2, T_7, T_8, T_9)%0A%09VMRHG V0, H0_1, H0_0%0A%09VMRHG V0, H1_1, H1_0%0A%09VMRHG V0, H2_1, H2_0%0A%09VMRLG V0, H0_1, H0_1%0A%09VMRLG V0, H1_1, H1_1%0A%09VMRLG V0, H2_1, H2_1%0A%0A%09// move h to the left and 0s at the right%0A%09VSLDB $8, H0_0, H0_0, H0_0%0A%09VSLDB $8, H1_0, H1_0, H1_0%0A%09VSLDB $8, H2_0, H2_0, H2_0%0A%0A%09// get message blocks and append 1 to start%0A%09SUB    $17, R3%0A%09VL     (R2), M0%0A%09VLL    R3, 16(R2), M1%0A%09ADD    $1, R3%0A%09MOVBZ  $1, R0%0A%09CMPBEQ R3, $16, 2(PC)%0A%09VLVGB  R3, R0, M1%0A%09VZERO  T_6%0A%09VZERO  T_7%0A%09VZERO  T_8%0A%09EXPACC2(M0, T_6, T_7, T_8, T_1, T_2, T_3)%0A%09EXPACC2(M1, T_6, T_7, T_8, T_1, T_2, T_3)%0A%09VLEIB  $2, $1, T_8%0A%09CMPBNE R3, $16, 2(PC)%0A%09VLEIB  $10, $1, T_8%0A%0A%09// add %5Bm0, m1%5D to h%0A%09VAG H0_0, T_6, H0_0%0A%09VAG H1_0, T_7, H1_0%0A%09VAG H2_0, T_8, H2_0%0A%0A%09VZERO M2%0A%09VZERO M3%0A%09VZERO M4%0A%09VZERO M5%0A%09VZERO T_10%0A%09VZERO M0%0A%0A%09// at this point R_0 .. R5_2 look like %5Br**2, r%5D%0A%09MULTIPLY(H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, R_0, R_1, R_2, R5_1, R5_2, M2, M3, M4, M5, T_10, M0, T_0, T_1, T_2, T_3, T_4, T_5, T_6, T_7, T_8, T_9)%0A%09REDUCE2(H0_0, H1_0, H2_0, M2, M3, M4, M5, T_9, H0_1, H1_1, H2_1, T_10)%0A%09SUB    $16, R3, R3%0A%09CMPBLE R3, $0, next%0A%0Ab1:%0A%09CMPBLE R3, $0, next%0A%0A%09// 1 block remaining%0A%0A%09// setup %5Br%C2%B2,r%5D%0A%09VSLDB $8, R_0, R_0, R_0%0A%09VSLDB $8, R_1, R_1, R_1%0A%09VSLDB $8, R_2, R_2, R_2%0A%09VSLDB $8, R5_1, R5_1, R5_1%0A%09VSLDB $8, R5_2, R5_2, R5_2%0A%0A%09VLVGG $1, RSAVE_0, R_0%0A%09VLVGG $1, RSAVE_1, R_1%0A%09VLVGG $1, RSAVE_2, R_2%0A%09VLVGG $1, R5SAVE_1, R5_1%0A%09VLVGG $1, R5SAVE_2, R5_2%0A%0A%09// setup %5Bh0, h1%5D%0A%09VSLDB $8, H0_0, H0_0, H0_0%0A%09VSLDB $8, H1_0, H1_0, H1_0%0A%09VSLDB $8, H2_0, H2_0, H2_0%0A%09VO    H0_1, H0_0, H0_0%0A%09VO    H1_1, H1_0, H1_0%0A%09VO    H2_1, H2_0, H2_0%0A%09VZERO H0_1%0A%09VZERO H1_1%0A%09VZERO H2_1%0A%0A%09VZERO M0%0A%09VZERO M1%0A%09VZERO M2%0A%09VZERO M3%0A%09VZERO M4%0A%09VZERO M5%0A%0A%09// H*%5Br**2, r%5D%0A%09MULTIPLY(H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, R_0, R_1, R_2, R5_1, R5_2, M0, M1, M2, M3, M4, M5, T_0, T_1, T_2, T_3, T_4, T_5, T_6, T_7, T_8, T_9)%0A%09REDUCE2(H0_0, H1_0, H2_0, M0, M1, M2, M3, M4, T_9, T_10, H0_1, M5)%0A%0A%09// set up %5B0, m0%5D limbs%0A%09SUB    $1, R3%0A%09VLL    R3, (R2), M0%0A%09ADD    $1, R3%0A%09MOVBZ  $1, R0%0A%09CMPBEQ R3, $16, 2(PC)%0A%09VLVGB  R3, R0, M0%0A%09VZERO  T_1%0A%09VZERO  T_2%0A%09VZERO  T_3%0A%09EXPACC2(M0, T_1, T_2, T_3, T_4, T_5, T_6)// limbs: %5B0, m%5D%0A%09CMPBNE R3, $16, 2(PC)%0A%09VLEIB  $10, $1, T_3%0A%0A%09// h+m0%0A%09VAQ H0_0, T_1, H0_0%0A%09VAQ H1_0, T_2, H1_0%0A%09VAQ H2_0, T_3, H2_0%0A%0A%09VZERO M0%0A%09VZERO M1%0A%09VZERO M2%0A%09VZERO M3%0A%09VZERO M4%0A%09VZERO M5%0A%09MULTIPLY(H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, R_0, R_1, R_2, R5_1, R5_2, M0, M1, M2, M3, M4, M5, T_0, T_1, T_2, T_3, T_4, T_5, T_6, T_7, T_8, T_9)%0A%09REDUCE2(H0_0, H1_0, H2_0, M0, M1, M2, M3, M4, T_9, T_10, H0_1, M5)%0A%0A%09BR next%0A%0Asquare:%0A%09// setup %5Br%C2%B2,r%5D%0A%09VSLDB $8, R_0, R_0, R_0%0A%09VSLDB $8, R_1, R_1, R_1%0A%09VSLDB $8, R_2, R_2, R_2%0A%09VSLDB $8, R5_1, R5_1, R5_1%0A%09VSLDB $8, R5_2, R5_2, R5_2%0A%0A%09VLVGG $1, RSAVE_0, R_0%0A%09VLVGG $1, RSAVE_1, R_1%0A%09VLVGG $1, RSAVE_2, R_2%0A%09VLVGG $1, R5SAVE_1, R5_1%0A%09VLVGG $1, R5SAVE_2, R5_2%0A%0A%09// setup %5Bh0, h1%5D%0A%09VSLDB $8, H0_0, H0_0, H0_0%0A%09VSLDB $8, H1_0, H1_0, H1_0%0A%09VSLDB $8, H2_0, H2_0, H2_0%0A%09VO    H0_1, H0_0, H0_0%0A%09VO    H1_1, H1_0, H1_0%0A%09VO    H2_1, H2_0, H2_0%0A%09VZERO H0_1%0A%09VZERO H1_1%0A%09VZERO H2_1%0A%0A%09VZERO M0%0A%09VZERO M1%0A%09VZERO M2%0A%09VZERO M3%0A%09VZERO M4%0A%09VZERO M5%0A%0A%09// (h0*r**2) + (h1*r)%0A%09MULTIPLY(H0_0, H1_0, H2_0, H0_1, H1_1, H2_1, R_0, R_1, R_2, R5_1, R5_2, M0, M1, M2, M3, M4, M5, T_0, T_1, T_2, T_3, T_4, T_5, T_6, T_7, T_8, T_9)%0A%09REDUCE2(H0_0, H1_0, H2_0, M0, M1, M2, M3, M4, T_9, T_10, H0_1, M5)%0A%09BR next%0A%0ATEXT %C2%B7hasVMSLFacility(SB), NOSPLIT, $24-1%0A%09MOVD  $x-24(SP), R1%0A%09XC    $24, 0(R1), 0(R1) // clear the storage%0A%09MOVD  $2, R0            // R0 is the number of double words stored -1%0A%09WORD  $0xB2B01000       // STFLE 0(R1)%0A%09XOR   R0, R0            // reset the value of R0%0A%09MOVBZ z-8(SP), R1%0A%09AND   $0x01, R1%0A%09BEQ   novmsl%0A%0Avectorinstalled:%0A%09// check if the vector instruction has been enabled%0A%09VLEIB  $0, $0xF, V16%0A%09VLGVB  $0, V16, R1%0A%09CMPBNE R1, $0xF, novmsl%0A%09MOVB   $1, ret+0(FP)    // have vx%0A%09RET%0A%0Anovmsl:%0A%09MOVB $0, ret+0(FP) // no vx%0A%09RET%0A
- x 2c0eed0780f38eae77d0c296ef370bbeca5fc56ae916c891f6a9b79d8b7b0a06 vendor/golang.org/x/sys/unix/mkerrors.sh
+ x dc34e51f6a3923183e3cbe7316c77b664c7eabea14ccf44d9c5021ecb9637fb6 vendor/golang.org/x/sys/unix/mkerrors.sh
dmppatch 5
@@ -9110,124 +9110,150 @@
  %7C%7C%0A
-%09%09$2 ~ /%5E(AF%7CSOCK%7CSO%7CSOL%7CIPPROTO%7CIP%7CIPV6%7CICMP6%7CTCP%7CEVFILT%7CNOTE%7CEV%7CSHUT%7CPROT%7CMAP%7CPACKET%7CMSG%7CSCM%7CMCL%7CDT%7CMADV%7CPR)_/ %7C%7C%0A
+%09%09$2 ~ /%5E(AF%7CSOCK%7CSO%7CSOL%7CIPPROTO%7CIP%7CIPV6%7CICMP6%7CTCP%7CEVFILT%7CNOTE%7CEV%7CSHUT%7CPROT%7CMAP%7CT?PACKET%7CMSG%7CSCM%7CMCL%7CDT%7CMADV%7CPR)_/ %7C%7C%0A%09%09$2 ~ /%5ETP_STATUS_/ %7C%7C%0A
 %09%09$2
- f dc36d41ef0b6489616ab88618c5d19d0ed918d09e96286a82ad352a627fc20e5 vendor/golang.org/x/sys/unix/mkpost.go
+ f 1a4675d943f4e478b312155ef57083493fcc3e53079cf594dd6e7dec8d2c45f2 vendor/golang.org/x/sys/unix/mkpost.go
dmppatch 5
@@ -2555,59 +2555,69 @@
 lds%0A
-%09removeFieldsRegex = regexp.MustCompile(%60%5CbX_%5CS+%60)%0A
+%09removeFieldsRegex = regexp.MustCompile(%60%5Cb(X_%5CS+%7CPadding)%60)%0A
 %09b =
- f 3e82cd40e6404072efff2e2a607bd56e922663beb266c261347fd52ff960bbb4 vendor/golang.org/x/sys/unix/zerrors_linux_386.go
+ f 0c7b30529be71cbb7084076cd2ab9c7a413effc28d9c78163159f9c7ffcb44ed vendor/golang.org/x/sys/unix/zerrors_linux_386.go
dmppatch 4
@@ -90726,16 +90726,836 @@
 = 0x100%0A
+%09TPACKET_ALIGNMENT                    = 0x10%0A%09TPACKET_HDRLEN                       = 0x34%0A%09TP_STATUS_AVAILABLE                  = 0x0%0A%09TP_STATUS_BLK_TMO                    = 0x20%0A%09TP_STATUS_COPY                       = 0x2%0A%09TP_STATUS_CSUMNOTREADY               = 0x8%0A%09TP_STATUS_CSUM_VALID                 = 0x80%0A%09TP_STATUS_KERNEL                     = 0x0%0A%09TP_STATUS_LOSING                     = 0x4%0A%09TP_STATUS_SENDING                    = 0x2%0A%09TP_STATUS_SEND_REQUEST               = 0x1%0A%09TP_STATUS_TS_RAW_HARDWARE            = -0x80000000%0A%09TP_STATUS_TS_SOFTWARE                = 0x20000000%0A%09TP_STATUS_TS_SYS_HARDWARE            = 0x40000000%0A%09TP_STATUS_USER                       = 0x1%0A%09TP_STATUS_VLAN_TPID_VALID            = 0x40%0A%09TP_STATUS_VLAN_VALID                 = 0x10%0A%09TP_STATUS_WRONG_FORMAT               = 0x4%0A
 %09TRACEFS
- f 3182d7141c19d4290c6e636aaee6e81cec842a20ba43757c694bc179447d79a5 vendor/golang.org/x/sys/unix/zerrors_linux_amd64.go
+ f cb6beccb7c1acb34a09c8f236d4a8442e0dee1aae3d45910dbd49f933c651343 vendor/golang.org/x/sys/unix/zerrors_linux_amd64.go
dmppatch 4
@@ -90778,16 +90778,836 @@
 = 0x100%0A
+%09TPACKET_ALIGNMENT                    = 0x10%0A%09TPACKET_HDRLEN                       = 0x34%0A%09TP_STATUS_AVAILABLE                  = 0x0%0A%09TP_STATUS_BLK_TMO                    = 0x20%0A%09TP_STATUS_COPY                       = 0x2%0A%09TP_STATUS_CSUMNOTREADY               = 0x8%0A%09TP_STATUS_CSUM_VALID                 = 0x80%0A%09TP_STATUS_KERNEL                     = 0x0%0A%09TP_STATUS_LOSING                     = 0x4%0A%09TP_STATUS_SENDING                    = 0x2%0A%09TP_STATUS_SEND_REQUEST               = 0x1%0A%09TP_STATUS_TS_RAW_HARDWARE            = -0x80000000%0A%09TP_STATUS_TS_SOFTWARE                = 0x20000000%0A%09TP_STATUS_TS_SYS_HARDWARE            = 0x40000000%0A%09TP_STATUS_USER                       = 0x1%0A%09TP_STATUS_VLAN_TPID_VALID            = 0x40%0A%09TP_STATUS_VLAN_VALID                 = 0x10%0A%09TP_STATUS_WRONG_FORMAT               = 0x4%0A
 %09TRACEFS
- f 67d4d3bb09600819beb5697389b0bbf452d1a8411b65efc92104ca1e4102a21c vendor/golang.org/x/sys/unix/zerrors_linux_arm.go
+ f 1c277e9b6520219c7fafd81cc1693f19ca5b7d6dceea971ac444f4093530a102 vendor/golang.org/x/sys/unix/zerrors_linux_arm.go
dmppatch 4
@@ -91032,16 +91032,836 @@
 = 0x100%0A
+%09TPACKET_ALIGNMENT                    = 0x10%0A%09TPACKET_HDRLEN                       = 0x34%0A%09TP_STATUS_AVAILABLE                  = 0x0%0A%09TP_STATUS_BLK_TMO                    = 0x20%0A%09TP_STATUS_COPY                       = 0x2%0A%09TP_STATUS_CSUMNOTREADY               = 0x8%0A%09TP_STATUS_CSUM_VALID                 = 0x80%0A%09TP_STATUS_KERNEL                     = 0x0%0A%09TP_STATUS_LOSING                     = 0x4%0A%09TP_STATUS_SENDING                    = 0x2%0A%09TP_STATUS_SEND_REQUEST               = 0x1%0A%09TP_STATUS_TS_RAW_HARDWARE            = -0x80000000%0A%09TP_STATUS_TS_SOFTWARE                = 0x20000000%0A%09TP_STATUS_TS_SYS_HARDWARE            = 0x40000000%0A%09TP_STATUS_USER                       = 0x1%0A%09TP_STATUS_VLAN_TPID_VALID            = 0x40%0A%09TP_STATUS_VLAN_VALID                 = 0x10%0A%09TP_STATUS_WRONG_FORMAT               = 0x4%0A
 %09TRACEFS
- f f9f5e4e15539bd76bb059e0291428ea8fbafa64bdda64b7dc1abdc28f14bc05e vendor/golang.org/x/sys/unix/zerrors_linux_arm64.go
+ f 084da3f3d4b4a6eaadc1fc1fccddee039d52d1cb3dcd5c66ca128fcf35daea89 vendor/golang.org/x/sys/unix/zerrors_linux_arm64.go
dmppatch 4
@@ -90410,16 +90410,836 @@
 = 0x100%0A
+%09TPACKET_ALIGNMENT                    = 0x10%0A%09TPACKET_HDRLEN                       = 0x34%0A%09TP_STATUS_AVAILABLE                  = 0x0%0A%09TP_STATUS_BLK_TMO                    = 0x20%0A%09TP_STATUS_COPY                       = 0x2%0A%09TP_STATUS_CSUMNOTREADY               = 0x8%0A%09TP_STATUS_CSUM_VALID                 = 0x80%0A%09TP_STATUS_KERNEL                     = 0x0%0A%09TP_STATUS_LOSING                     = 0x4%0A%09TP_STATUS_SENDING                    = 0x2%0A%09TP_STATUS_SEND_REQUEST               = 0x1%0A%09TP_STATUS_TS_RAW_HARDWARE            = -0x80000000%0A%09TP_STATUS_TS_SOFTWARE                = 0x20000000%0A%09TP_STATUS_TS_SYS_HARDWARE            = 0x40000000%0A%09TP_STATUS_USER                       = 0x1%0A%09TP_STATUS_VLAN_TPID_VALID            = 0x40%0A%09TP_STATUS_VLAN_VALID                 = 0x10%0A%09TP_STATUS_WRONG_FORMAT               = 0x4%0A
 %09TRACEFS
- f 6771977051088e33d3b5354df8bf6cb912354dd40597a67571cab5efd9016cdb vendor/golang.org/x/sys/unix/zerrors_linux_mips.go
+ f 1fea6c88de48438c86be10ab80764a18e70db604ec22a962dbea80671f13fba1 vendor/golang.org/x/sys/unix/zerrors_linux_mips.go
dmppatch 4
@@ -91015,16 +91015,836 @@
  0x8000%0A
+%09TPACKET_ALIGNMENT                    = 0x10%0A%09TPACKET_HDRLEN                       = 0x34%0A%09TP_STATUS_AVAILABLE                  = 0x0%0A%09TP_STATUS_BLK_TMO                    = 0x20%0A%09TP_STATUS_COPY                       = 0x2%0A%09TP_STATUS_CSUMNOTREADY               = 0x8%0A%09TP_STATUS_CSUM_VALID                 = 0x80%0A%09TP_STATUS_KERNEL                     = 0x0%0A%09TP_STATUS_LOSING                     = 0x4%0A%09TP_STATUS_SENDING                    = 0x2%0A%09TP_STATUS_SEND_REQUEST               = 0x1%0A%09TP_STATUS_TS_RAW_HARDWARE            = -0x80000000%0A%09TP_STATUS_TS_SOFTWARE                = 0x20000000%0A%09TP_STATUS_TS_SYS_HARDWARE            = 0x40000000%0A%09TP_STATUS_USER                       = 0x1%0A%09TP_STATUS_VLAN_TPID_VALID            = 0x40%0A%09TP_STATUS_VLAN_VALID                 = 0x10%0A%09TP_STATUS_WRONG_FORMAT               = 0x4%0A
 %09TRACEFS
- f 7584acd98682ab9d11fbaaa61224d9210152c755094ca6dee10e9366bf5a85c7 vendor/golang.org/x/sys/unix/zerrors_linux_mips64.go
+ f 9489887e2526d176af865b6219768cf217abb5afc261faf9eb619ab5354c7a2b vendor/golang.org/x/sys/unix/zerrors_linux_mips64.go
dmppatch 4
@@ -91016,16 +91016,836 @@
  0x8000%0A
+%09TPACKET_ALIGNMENT                    = 0x10%0A%09TPACKET_HDRLEN                       = 0x34%0A%09TP_STATUS_AVAILABLE                  = 0x0%0A%09TP_STATUS_BLK_TMO                    = 0x20%0A%09TP_STATUS_COPY                       = 0x2%0A%09TP_STATUS_CSUMNOTREADY               = 0x8%0A%09TP_STATUS_CSUM_VALID                 = 0x80%0A%09TP_STATUS_KERNEL                     = 0x0%0A%09TP_STATUS_LOSING                     = 0x4%0A%09TP_STATUS_SENDING                    = 0x2%0A%09TP_STATUS_SEND_REQUEST               = 0x1%0A%09TP_STATUS_TS_RAW_HARDWARE            = -0x80000000%0A%09TP_STATUS_TS_SOFTWARE                = 0x20000000%0A%09TP_STATUS_TS_SYS_HARDWARE            = 0x40000000%0A%09TP_STATUS_USER                       = 0x1%0A%09TP_STATUS_VLAN_TPID_VALID            = 0x40%0A%09TP_STATUS_VLAN_VALID                 = 0x10%0A%09TP_STATUS_WRONG_FORMAT               = 0x4%0A
 %09TRACEFS
- f b12aa6655e5628736746d335247bd353a95642675c042316bcfcd38e8352838f vendor/golang.org/x/sys/unix/zerrors_linux_mips64le.go
+ f db06d3872e2092ae9f3f33537f9a12a88b33ce8c99b7908589bfccc1ab942eb3 vendor/golang.org/x/sys/unix/zerrors_linux_mips64le.go
dmppatch 4
@@ -91018,16 +91018,836 @@
  0x8000%0A
+%09TPACKET_ALIGNMENT                    = 0x10%0A%09TPACKET_HDRLEN                       = 0x34%0A%09TP_STATUS_AVAILABLE                  = 0x0%0A%09TP_STATUS_BLK_TMO                    = 0x20%0A%09TP_STATUS_COPY                       = 0x2%0A%09TP_STATUS_CSUMNOTREADY               = 0x8%0A%09TP_STATUS_CSUM_VALID                 = 0x80%0A%09TP_STATUS_KERNEL                     = 0x0%0A%09TP_STATUS_LOSING                     = 0x4%0A%09TP_STATUS_SENDING                    = 0x2%0A%09TP_STATUS_SEND_REQUEST               = 0x1%0A%09TP_STATUS_TS_RAW_HARDWARE            = -0x80000000%0A%09TP_STATUS_TS_SOFTWARE                = 0x20000000%0A%09TP_STATUS_TS_SYS_HARDWARE            = 0x40000000%0A%09TP_STATUS_USER                       = 0x1%0A%09TP_STATUS_VLAN_TPID_VALID            = 0x40%0A%09TP_STATUS_VLAN_VALID                 = 0x10%0A%09TP_STATUS_WRONG_FORMAT               = 0x4%0A
 %09TRACEFS
- f db8ab3779e5f23caeb2a639c571bc75927cdda8cbb741b532e04c7c9f364c568 vendor/golang.org/x/sys/unix/zerrors_linux_mipsle.go
+ f 479c6268788112665706d601a9552ce7f73d808a05789a4e127c944f68a223cb vendor/golang.org/x/sys/unix/zerrors_linux_mipsle.go
dmppatch 4
@@ -91017,16 +91017,836 @@
  0x8000%0A
+%09TPACKET_ALIGNMENT                    = 0x10%0A%09TPACKET_HDRLEN                       = 0x34%0A%09TP_STATUS_AVAILABLE                  = 0x0%0A%09TP_STATUS_BLK_TMO                    = 0x20%0A%09TP_STATUS_COPY                       = 0x2%0A%09TP_STATUS_CSUMNOTREADY               = 0x8%0A%09TP_STATUS_CSUM_VALID                 = 0x80%0A%09TP_STATUS_KERNEL                     = 0x0%0A%09TP_STATUS_LOSING                     = 0x4%0A%09TP_STATUS_SENDING                    = 0x2%0A%09TP_STATUS_SEND_REQUEST               = 0x1%0A%09TP_STATUS_TS_RAW_HARDWARE            = -0x80000000%0A%09TP_STATUS_TS_SOFTWARE                = 0x20000000%0A%09TP_STATUS_TS_SYS_HARDWARE            = 0x40000000%0A%09TP_STATUS_USER                       = 0x1%0A%09TP_STATUS_VLAN_TPID_VALID            = 0x40%0A%09TP_STATUS_VLAN_VALID                 = 0x10%0A%09TP_STATUS_WRONG_FORMAT               = 0x4%0A
 %09TRACEFS
- f 6746320be2d0bf1f05ad933fa7fe2df50ec4715265c0083473e67cdd7f515b08 vendor/golang.org/x/sys/unix/zerrors_linux_ppc64.go
+ f 2fa7dad0563b13276dc8003416e7d12493ce7a73c36869784f9c4530c1fca15f vendor/golang.org/x/sys/unix/zerrors_linux_ppc64.go
dmppatch 4
@@ -93624,16 +93624,836 @@
 x400000%0A
+%09TPACKET_ALIGNMENT                    = 0x10%0A%09TPACKET_HDRLEN                       = 0x34%0A%09TP_STATUS_AVAILABLE                  = 0x0%0A%09TP_STATUS_BLK_TMO                    = 0x20%0A%09TP_STATUS_COPY                       = 0x2%0A%09TP_STATUS_CSUMNOTREADY               = 0x8%0A%09TP_STATUS_CSUM_VALID                 = 0x80%0A%09TP_STATUS_KERNEL                     = 0x0%0A%09TP_STATUS_LOSING                     = 0x4%0A%09TP_STATUS_SENDING                    = 0x2%0A%09TP_STATUS_SEND_REQUEST               = 0x1%0A%09TP_STATUS_TS_RAW_HARDWARE            = -0x80000000%0A%09TP_STATUS_TS_SOFTWARE                = 0x20000000%0A%09TP_STATUS_TS_SYS_HARDWARE            = 0x40000000%0A%09TP_STATUS_USER                       = 0x1%0A%09TP_STATUS_VLAN_TPID_VALID            = 0x40%0A%09TP_STATUS_VLAN_VALID                 = 0x10%0A%09TP_STATUS_WRONG_FORMAT               = 0x4%0A
 %09TRACEFS
- f d093014b9cdfbd0275b7c5a561625fc26c4b037455ebe57a713b1db2db484ee6 vendor/golang.org/x/sys/unix/zerrors_linux_ppc64le.go
+ f e4bfe7e22fa77dd14882bdd1da5022709441247626a23bfed22c922ef4c0f7b9 vendor/golang.org/x/sys/unix/zerrors_linux_ppc64le.go
dmppatch 4
@@ -93626,16 +93626,836 @@
 x400000%0A
+%09TPACKET_ALIGNMENT                    = 0x10%0A%09TPACKET_HDRLEN                       = 0x34%0A%09TP_STATUS_AVAILABLE                  = 0x0%0A%09TP_STATUS_BLK_TMO                    = 0x20%0A%09TP_STATUS_COPY                       = 0x2%0A%09TP_STATUS_CSUMNOTREADY               = 0x8%0A%09TP_STATUS_CSUM_VALID                 = 0x80%0A%09TP_STATUS_KERNEL                     = 0x0%0A%09TP_STATUS_LOSING                     = 0x4%0A%09TP_STATUS_SENDING                    = 0x2%0A%09TP_STATUS_SEND_REQUEST               = 0x1%0A%09TP_STATUS_TS_RAW_HARDWARE            = -0x80000000%0A%09TP_STATUS_TS_SOFTWARE                = 0x20000000%0A%09TP_STATUS_TS_SYS_HARDWARE            = 0x40000000%0A%09TP_STATUS_USER                       = 0x1%0A%09TP_STATUS_VLAN_TPID_VALID            = 0x40%0A%09TP_STATUS_VLAN_VALID                 = 0x10%0A%09TP_STATUS_WRONG_FORMAT               = 0x4%0A
 %09TRACEFS
- f 0efdf0b67cec1109fbc9c6d0381fcd2fb3d78d0b7a2246705388f2677b46492d vendor/golang.org/x/sys/unix/zerrors_linux_s390x.go
+ f 3af512ec7908aea35f78caaf198f31eaea5e50db604c568e4213c7944291ccf8 vendor/golang.org/x/sys/unix/zerrors_linux_s390x.go
dmppatch 4
@@ -93531,16 +93531,836 @@
 = 0x100%0A
+%09TPACKET_ALIGNMENT                    = 0x10%0A%09TPACKET_HDRLEN                       = 0x34%0A%09TP_STATUS_AVAILABLE                  = 0x0%0A%09TP_STATUS_BLK_TMO                    = 0x20%0A%09TP_STATUS_COPY                       = 0x2%0A%09TP_STATUS_CSUMNOTREADY               = 0x8%0A%09TP_STATUS_CSUM_VALID                 = 0x80%0A%09TP_STATUS_KERNEL                     = 0x0%0A%09TP_STATUS_LOSING                     = 0x4%0A%09TP_STATUS_SENDING                    = 0x2%0A%09TP_STATUS_SEND_REQUEST               = 0x1%0A%09TP_STATUS_TS_RAW_HARDWARE            = -0x80000000%0A%09TP_STATUS_TS_SOFTWARE                = 0x20000000%0A%09TP_STATUS_TS_SYS_HARDWARE            = 0x40000000%0A%09TP_STATUS_USER                       = 0x1%0A%09TP_STATUS_VLAN_TPID_VALID            = 0x40%0A%09TP_STATUS_VLAN_VALID                 = 0x10%0A%09TP_STATUS_WRONG_FORMAT               = 0x4%0A
 %09TRACEFS
- f c9bfc5df1dfb3a6191ad951ab9f12454d8d5098b87106b9c5254f0149cf74a8c vendor/golang.org/x/sys/unix/ztypes_linux_386.go
+ f ee183aa0b65e1e9a168ebdf5d9d4df79e76a7e2edec8d5450d0907dc1a4966ff vendor/golang.org/x/sys/unix/ztypes_linux_386.go
dmppatch 3
@@ -27311,12 +27311,1575 @@
 US = 0x10%0A)%0A
+%0Atype TpacketHdr struct %7B%0A%09Status  uint32%0A%09Len     uint32%0A%09Snaplen uint32%0A%09Mac     uint16%0A%09Net     uint16%0A%09Sec     uint32%0A%09Usec    uint32%0A%7D%0A%0Atype Tpacket2Hdr struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Sec       uint32%0A%09Nsec      uint32%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%09_         %5B4%5Duint8%0A%7D%0A%0Atype Tpacket3Hdr struct %7B%0A%09Next_offset uint32%0A%09Sec         uint32%0A%09Nsec        uint32%0A%09Snaplen     uint32%0A%09Len         uint32%0A%09Status      uint32%0A%09Mac         uint16%0A%09Net         uint16%0A%09Hv1         TpacketHdrVariant1%0A%09_           %5B8%5Duint8%0A%7D%0A%0Atype TpacketHdrVariant1 struct %7B%0A%09Rxhash    uint32%0A%09Vlan_tci  uint32%0A%09Vlan_tpid uint16%0A%09_         uint16%0A%7D%0A%0Atype TpacketBlockDesc struct %7B%0A%09Version uint32%0A%09To_priv uint32%0A%09Hdr     %5B40%5Dbyte%0A%7D%0A%0Atype TpacketReq struct %7B%0A%09Block_size uint32%0A%09Block_nr   uint32%0A%09Frame_size uint32%0A%09Frame_nr   uint32%0A%7D%0A%0Atype TpacketReq3 struct %7B%0A%09Block_size       uint32%0A%09Block_nr         uint32%0A%09Frame_size       uint32%0A%09Frame_nr         uint32%0A%09Retire_blk_tov   uint32%0A%09Sizeof_priv      uint32%0A%09Feature_req_word uint32%0A%7D%0A%0Atype TpacketStats struct %7B%0A%09Packets uint32%0A%09Drops   uint32%0A%7D%0A%0Atype TpacketStatsV3 struct %7B%0A%09Packets      uint32%0A%09Drops        uint32%0A%09Freeze_q_cnt uint32%0A%7D%0A%0Atype TpacketAuxdata struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%7D%0A%0Aconst (%0A%09TPACKET_V1 = 0x0%0A%09TPACKET_V2 = 0x1%0A%09TPACKET_V3 = 0x2%0A)%0A%0Aconst (%0A%09SizeofTpacketHdr  = 0x18%0A%09SizeofTpacket2Hdr = 0x20%0A%09SizeofTpacket3Hdr = 0x30%0A)%0A
- f a4e975ec66a9eaa293d1c2f175a3cb84f0f2995ce00be1ee18f9ecdf62f45749 vendor/golang.org/x/sys/unix/ztypes_linux_amd64.go
+ f 8e86a1de5eaa5b90f75e1f3292f640bde943b567b050a92f6a86421810367016 vendor/golang.org/x/sys/unix/ztypes_linux_amd64.go
dmppatch 3
@@ -27668,16 +27668,1596 @@
 RONOUS = 0x10%0A)%0A
+%0Atype TpacketHdr struct %7B%0A%09Status  uint64%0A%09Len     uint32%0A%09Snaplen uint32%0A%09Mac     uint16%0A%09Net     uint16%0A%09Sec     uint32%0A%09Usec    uint32%0A%09_       %5B4%5Dbyte%0A%7D%0A%0Atype Tpacket2Hdr struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Sec       uint32%0A%09Nsec      uint32%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%09_         %5B4%5Duint8%0A%7D%0A%0Atype Tpacket3Hdr struct %7B%0A%09Next_offset uint32%0A%09Sec         uint32%0A%09Nsec        uint32%0A%09Snaplen     uint32%0A%09Len         uint32%0A%09Status      uint32%0A%09Mac         uint16%0A%09Net         uint16%0A%09Hv1         TpacketHdrVariant1%0A%09_           %5B8%5Duint8%0A%7D%0A%0Atype TpacketHdrVariant1 struct %7B%0A%09Rxhash    uint32%0A%09Vlan_tci  uint32%0A%09Vlan_tpid uint16%0A%09_         uint16%0A%7D%0A%0Atype TpacketBlockDesc struct %7B%0A%09Version uint32%0A%09To_priv uint32%0A%09Hdr     %5B40%5Dbyte%0A%7D%0A%0Atype TpacketReq struct %7B%0A%09Block_size uint32%0A%09Block_nr   uint32%0A%09Frame_size uint32%0A%09Frame_nr   uint32%0A%7D%0A%0Atype TpacketReq3 struct %7B%0A%09Block_size       uint32%0A%09Block_nr         uint32%0A%09Frame_size       uint32%0A%09Frame_nr         uint32%0A%09Retire_blk_tov   uint32%0A%09Sizeof_priv      uint32%0A%09Feature_req_word uint32%0A%7D%0A%0Atype TpacketStats struct %7B%0A%09Packets uint32%0A%09Drops   uint32%0A%7D%0A%0Atype TpacketStatsV3 struct %7B%0A%09Packets      uint32%0A%09Drops        uint32%0A%09Freeze_q_cnt uint32%0A%7D%0A%0Atype TpacketAuxdata struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%7D%0A%0Aconst (%0A%09TPACKET_V1 = 0x0%0A%09TPACKET_V2 = 0x1%0A%09TPACKET_V3 = 0x2%0A)%0A%0Aconst (%0A%09SizeofTpacketHdr  = 0x20%0A%09SizeofTpacket2Hdr = 0x20%0A%09SizeofTpacket3Hdr = 0x30%0A)%0A
- f f80f99b0334d9ead485a494008ca8db16062eb6c70d4f48cfeeb6ac6d87ac195 vendor/golang.org/x/sys/unix/ztypes_linux_arm.go
+ f 19ce115e727c92fdfb3ef5b423439c3acd2fd446422b05d984fe4beb972d1ec9 vendor/golang.org/x/sys/unix/ztypes_linux_arm.go
dmppatch 3
@@ -27140,12 +27140,1575 @@
 US = 0x10%0A)%0A
+%0Atype TpacketHdr struct %7B%0A%09Status  uint32%0A%09Len     uint32%0A%09Snaplen uint32%0A%09Mac     uint16%0A%09Net     uint16%0A%09Sec     uint32%0A%09Usec    uint32%0A%7D%0A%0Atype Tpacket2Hdr struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Sec       uint32%0A%09Nsec      uint32%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%09_         %5B4%5Duint8%0A%7D%0A%0Atype Tpacket3Hdr struct %7B%0A%09Next_offset uint32%0A%09Sec         uint32%0A%09Nsec        uint32%0A%09Snaplen     uint32%0A%09Len         uint32%0A%09Status      uint32%0A%09Mac         uint16%0A%09Net         uint16%0A%09Hv1         TpacketHdrVariant1%0A%09_           %5B8%5Duint8%0A%7D%0A%0Atype TpacketHdrVariant1 struct %7B%0A%09Rxhash    uint32%0A%09Vlan_tci  uint32%0A%09Vlan_tpid uint16%0A%09_         uint16%0A%7D%0A%0Atype TpacketBlockDesc struct %7B%0A%09Version uint32%0A%09To_priv uint32%0A%09Hdr     %5B40%5Dbyte%0A%7D%0A%0Atype TpacketReq struct %7B%0A%09Block_size uint32%0A%09Block_nr   uint32%0A%09Frame_size uint32%0A%09Frame_nr   uint32%0A%7D%0A%0Atype TpacketReq3 struct %7B%0A%09Block_size       uint32%0A%09Block_nr         uint32%0A%09Frame_size       uint32%0A%09Frame_nr         uint32%0A%09Retire_blk_tov   uint32%0A%09Sizeof_priv      uint32%0A%09Feature_req_word uint32%0A%7D%0A%0Atype TpacketStats struct %7B%0A%09Packets uint32%0A%09Drops   uint32%0A%7D%0A%0Atype TpacketStatsV3 struct %7B%0A%09Packets      uint32%0A%09Drops        uint32%0A%09Freeze_q_cnt uint32%0A%7D%0A%0Atype TpacketAuxdata struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%7D%0A%0Aconst (%0A%09TPACKET_V1 = 0x0%0A%09TPACKET_V2 = 0x1%0A%09TPACKET_V3 = 0x2%0A)%0A%0Aconst (%0A%09SizeofTpacketHdr  = 0x18%0A%09SizeofTpacket2Hdr = 0x20%0A%09SizeofTpacket3Hdr = 0x30%0A)%0A
- f ebe4b1d73632b157bf1e523e4700a4e05803d21310b634a00df554def98d6a1b vendor/golang.org/x/sys/unix/ztypes_linux_arm64.go
+ f cd75ce8fe60f69edcee7cf7b7a8bbf285a0e0cbd6e8661cc2f203d60b8deec16 vendor/golang.org/x/sys/unix/ztypes_linux_arm64.go
dmppatch 3
@@ -27312,16 +27312,1596 @@
 RONOUS = 0x10%0A)%0A
+%0Atype TpacketHdr struct %7B%0A%09Status  uint64%0A%09Len     uint32%0A%09Snaplen uint32%0A%09Mac     uint16%0A%09Net     uint16%0A%09Sec     uint32%0A%09Usec    uint32%0A%09_       %5B4%5Dbyte%0A%7D%0A%0Atype Tpacket2Hdr struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Sec       uint32%0A%09Nsec      uint32%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%09_         %5B4%5Duint8%0A%7D%0A%0Atype Tpacket3Hdr struct %7B%0A%09Next_offset uint32%0A%09Sec         uint32%0A%09Nsec        uint32%0A%09Snaplen     uint32%0A%09Len         uint32%0A%09Status      uint32%0A%09Mac         uint16%0A%09Net         uint16%0A%09Hv1         TpacketHdrVariant1%0A%09_           %5B8%5Duint8%0A%7D%0A%0Atype TpacketHdrVariant1 struct %7B%0A%09Rxhash    uint32%0A%09Vlan_tci  uint32%0A%09Vlan_tpid uint16%0A%09_         uint16%0A%7D%0A%0Atype TpacketBlockDesc struct %7B%0A%09Version uint32%0A%09To_priv uint32%0A%09Hdr     %5B40%5Dbyte%0A%7D%0A%0Atype TpacketReq struct %7B%0A%09Block_size uint32%0A%09Block_nr   uint32%0A%09Frame_size uint32%0A%09Frame_nr   uint32%0A%7D%0A%0Atype TpacketReq3 struct %7B%0A%09Block_size       uint32%0A%09Block_nr         uint32%0A%09Frame_size       uint32%0A%09Frame_nr         uint32%0A%09Retire_blk_tov   uint32%0A%09Sizeof_priv      uint32%0A%09Feature_req_word uint32%0A%7D%0A%0Atype TpacketStats struct %7B%0A%09Packets uint32%0A%09Drops   uint32%0A%7D%0A%0Atype TpacketStatsV3 struct %7B%0A%09Packets      uint32%0A%09Drops        uint32%0A%09Freeze_q_cnt uint32%0A%7D%0A%0Atype TpacketAuxdata struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%7D%0A%0Aconst (%0A%09TPACKET_V1 = 0x0%0A%09TPACKET_V2 = 0x1%0A%09TPACKET_V3 = 0x2%0A)%0A%0Aconst (%0A%09SizeofTpacketHdr  = 0x20%0A%09SizeofTpacket2Hdr = 0x20%0A%09SizeofTpacket3Hdr = 0x30%0A)%0A
- f 011e549cb5e28712beef779cfa49249d248513d60fce8b7978b225417b949253 vendor/golang.org/x/sys/unix/ztypes_linux_mips.go
+ f 6052d2cb5fab058e09840a8cb57c3d51c13c4a8c0c60ba7170a6ea89d5b0b3da vendor/golang.org/x/sys/unix/ztypes_linux_mips.go
dmppatch 3
@@ -27226,12 +27226,1575 @@
 US = 0x10%0A)%0A
+%0Atype TpacketHdr struct %7B%0A%09Status  uint32%0A%09Len     uint32%0A%09Snaplen uint32%0A%09Mac     uint16%0A%09Net     uint16%0A%09Sec     uint32%0A%09Usec    uint32%0A%7D%0A%0Atype Tpacket2Hdr struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Sec       uint32%0A%09Nsec      uint32%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%09_         %5B4%5Duint8%0A%7D%0A%0Atype Tpacket3Hdr struct %7B%0A%09Next_offset uint32%0A%09Sec         uint32%0A%09Nsec        uint32%0A%09Snaplen     uint32%0A%09Len         uint32%0A%09Status      uint32%0A%09Mac         uint16%0A%09Net         uint16%0A%09Hv1         TpacketHdrVariant1%0A%09_           %5B8%5Duint8%0A%7D%0A%0Atype TpacketHdrVariant1 struct %7B%0A%09Rxhash    uint32%0A%09Vlan_tci  uint32%0A%09Vlan_tpid uint16%0A%09_         uint16%0A%7D%0A%0Atype TpacketBlockDesc struct %7B%0A%09Version uint32%0A%09To_priv uint32%0A%09Hdr     %5B40%5Dbyte%0A%7D%0A%0Atype TpacketReq struct %7B%0A%09Block_size uint32%0A%09Block_nr   uint32%0A%09Frame_size uint32%0A%09Frame_nr   uint32%0A%7D%0A%0Atype TpacketReq3 struct %7B%0A%09Block_size       uint32%0A%09Block_nr         uint32%0A%09Frame_size       uint32%0A%09Frame_nr         uint32%0A%09Retire_blk_tov   uint32%0A%09Sizeof_priv      uint32%0A%09Feature_req_word uint32%0A%7D%0A%0Atype TpacketStats struct %7B%0A%09Packets uint32%0A%09Drops   uint32%0A%7D%0A%0Atype TpacketStatsV3 struct %7B%0A%09Packets      uint32%0A%09Drops        uint32%0A%09Freeze_q_cnt uint32%0A%7D%0A%0Atype TpacketAuxdata struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%7D%0A%0Aconst (%0A%09TPACKET_V1 = 0x0%0A%09TPACKET_V2 = 0x1%0A%09TPACKET_V3 = 0x2%0A)%0A%0Aconst (%0A%09SizeofTpacketHdr  = 0x18%0A%09SizeofTpacket2Hdr = 0x20%0A%09SizeofTpacket3Hdr = 0x30%0A)%0A
- f ff862a67943de3306c5972576763073eb24a5789b039c0ff38beb427a49db85b vendor/golang.org/x/sys/unix/ztypes_linux_mips64.go
+ f 5077d856e8c84a5f07dd93c9eca0487ac5a328dc73dc387272ed67e50ec3f022 vendor/golang.org/x/sys/unix/ztypes_linux_mips64.go
dmppatch 3
@@ -27350,16 +27350,1596 @@
 RONOUS = 0x10%0A)%0A
+%0Atype TpacketHdr struct %7B%0A%09Status  uint64%0A%09Len     uint32%0A%09Snaplen uint32%0A%09Mac     uint16%0A%09Net     uint16%0A%09Sec     uint32%0A%09Usec    uint32%0A%09_       %5B4%5Dbyte%0A%7D%0A%0Atype Tpacket2Hdr struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Sec       uint32%0A%09Nsec      uint32%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%09_         %5B4%5Duint8%0A%7D%0A%0Atype Tpacket3Hdr struct %7B%0A%09Next_offset uint32%0A%09Sec         uint32%0A%09Nsec        uint32%0A%09Snaplen     uint32%0A%09Len         uint32%0A%09Status      uint32%0A%09Mac         uint16%0A%09Net         uint16%0A%09Hv1         TpacketHdrVariant1%0A%09_           %5B8%5Duint8%0A%7D%0A%0Atype TpacketHdrVariant1 struct %7B%0A%09Rxhash    uint32%0A%09Vlan_tci  uint32%0A%09Vlan_tpid uint16%0A%09_         uint16%0A%7D%0A%0Atype TpacketBlockDesc struct %7B%0A%09Version uint32%0A%09To_priv uint32%0A%09Hdr     %5B40%5Dbyte%0A%7D%0A%0Atype TpacketReq struct %7B%0A%09Block_size uint32%0A%09Block_nr   uint32%0A%09Frame_size uint32%0A%09Frame_nr   uint32%0A%7D%0A%0Atype TpacketReq3 struct %7B%0A%09Block_size       uint32%0A%09Block_nr         uint32%0A%09Frame_size       uint32%0A%09Frame_nr         uint32%0A%09Retire_blk_tov   uint32%0A%09Sizeof_priv      uint32%0A%09Feature_req_word uint32%0A%7D%0A%0Atype TpacketStats struct %7B%0A%09Packets uint32%0A%09Drops   uint32%0A%7D%0A%0Atype TpacketStatsV3 struct %7B%0A%09Packets      uint32%0A%09Drops        uint32%0A%09Freeze_q_cnt uint32%0A%7D%0A%0Atype TpacketAuxdata struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%7D%0A%0Aconst (%0A%09TPACKET_V1 = 0x0%0A%09TPACKET_V2 = 0x1%0A%09TPACKET_V3 = 0x2%0A)%0A%0Aconst (%0A%09SizeofTpacketHdr  = 0x20%0A%09SizeofTpacket2Hdr = 0x20%0A%09SizeofTpacket3Hdr = 0x30%0A)%0A
- f e216266f91fc18d72ce5ede52e4dfcd55d547f6f8b2b16bbe96b10db04857002 vendor/golang.org/x/sys/unix/ztypes_linux_mips64le.go
+ f 91d48b8e21985eccd20f72ea7cc7edb13b7be4eb087aed3149b878360c8c0baf vendor/golang.org/x/sys/unix/ztypes_linux_mips64le.go
dmppatch 3
@@ -27352,16 +27352,1596 @@
 RONOUS = 0x10%0A)%0A
+%0Atype TpacketHdr struct %7B%0A%09Status  uint64%0A%09Len     uint32%0A%09Snaplen uint32%0A%09Mac     uint16%0A%09Net     uint16%0A%09Sec     uint32%0A%09Usec    uint32%0A%09_       %5B4%5Dbyte%0A%7D%0A%0Atype Tpacket2Hdr struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Sec       uint32%0A%09Nsec      uint32%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%09_         %5B4%5Duint8%0A%7D%0A%0Atype Tpacket3Hdr struct %7B%0A%09Next_offset uint32%0A%09Sec         uint32%0A%09Nsec        uint32%0A%09Snaplen     uint32%0A%09Len         uint32%0A%09Status      uint32%0A%09Mac         uint16%0A%09Net         uint16%0A%09Hv1         TpacketHdrVariant1%0A%09_           %5B8%5Duint8%0A%7D%0A%0Atype TpacketHdrVariant1 struct %7B%0A%09Rxhash    uint32%0A%09Vlan_tci  uint32%0A%09Vlan_tpid uint16%0A%09_         uint16%0A%7D%0A%0Atype TpacketBlockDesc struct %7B%0A%09Version uint32%0A%09To_priv uint32%0A%09Hdr     %5B40%5Dbyte%0A%7D%0A%0Atype TpacketReq struct %7B%0A%09Block_size uint32%0A%09Block_nr   uint32%0A%09Frame_size uint32%0A%09Frame_nr   uint32%0A%7D%0A%0Atype TpacketReq3 struct %7B%0A%09Block_size       uint32%0A%09Block_nr         uint32%0A%09Frame_size       uint32%0A%09Frame_nr         uint32%0A%09Retire_blk_tov   uint32%0A%09Sizeof_priv      uint32%0A%09Feature_req_word uint32%0A%7D%0A%0Atype TpacketStats struct %7B%0A%09Packets uint32%0A%09Drops   uint32%0A%7D%0A%0Atype TpacketStatsV3 struct %7B%0A%09Packets      uint32%0A%09Drops        uint32%0A%09Freeze_q_cnt uint32%0A%7D%0A%0Atype TpacketAuxdata struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%7D%0A%0Aconst (%0A%09TPACKET_V1 = 0x0%0A%09TPACKET_V2 = 0x1%0A%09TPACKET_V3 = 0x2%0A)%0A%0Aconst (%0A%09SizeofTpacketHdr  = 0x20%0A%09SizeofTpacket2Hdr = 0x20%0A%09SizeofTpacket3Hdr = 0x30%0A)%0A
- f bf007ab7db0a6eee0b02f8999e065375b27753cb7c57e62f7f485cd888168aed vendor/golang.org/x/sys/unix/ztypes_linux_mipsle.go
+ f 1d2d41e661a1f276953655a524b5ac3401ab12bf8f11e0637e5518664dcab922 vendor/golang.org/x/sys/unix/ztypes_linux_mipsle.go
dmppatch 3
@@ -27228,12 +27228,1575 @@
 US = 0x10%0A)%0A
+%0Atype TpacketHdr struct %7B%0A%09Status  uint32%0A%09Len     uint32%0A%09Snaplen uint32%0A%09Mac     uint16%0A%09Net     uint16%0A%09Sec     uint32%0A%09Usec    uint32%0A%7D%0A%0Atype Tpacket2Hdr struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Sec       uint32%0A%09Nsec      uint32%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%09_         %5B4%5Duint8%0A%7D%0A%0Atype Tpacket3Hdr struct %7B%0A%09Next_offset uint32%0A%09Sec         uint32%0A%09Nsec        uint32%0A%09Snaplen     uint32%0A%09Len         uint32%0A%09Status      uint32%0A%09Mac         uint16%0A%09Net         uint16%0A%09Hv1         TpacketHdrVariant1%0A%09_           %5B8%5Duint8%0A%7D%0A%0Atype TpacketHdrVariant1 struct %7B%0A%09Rxhash    uint32%0A%09Vlan_tci  uint32%0A%09Vlan_tpid uint16%0A%09_         uint16%0A%7D%0A%0Atype TpacketBlockDesc struct %7B%0A%09Version uint32%0A%09To_priv uint32%0A%09Hdr     %5B40%5Dbyte%0A%7D%0A%0Atype TpacketReq struct %7B%0A%09Block_size uint32%0A%09Block_nr   uint32%0A%09Frame_size uint32%0A%09Frame_nr   uint32%0A%7D%0A%0Atype TpacketReq3 struct %7B%0A%09Block_size       uint32%0A%09Block_nr         uint32%0A%09Frame_size       uint32%0A%09Frame_nr         uint32%0A%09Retire_blk_tov   uint32%0A%09Sizeof_priv      uint32%0A%09Feature_req_word uint32%0A%7D%0A%0Atype TpacketStats struct %7B%0A%09Packets uint32%0A%09Drops   uint32%0A%7D%0A%0Atype TpacketStatsV3 struct %7B%0A%09Packets      uint32%0A%09Drops        uint32%0A%09Freeze_q_cnt uint32%0A%7D%0A%0Atype TpacketAuxdata struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%7D%0A%0Aconst (%0A%09TPACKET_V1 = 0x0%0A%09TPACKET_V2 = 0x1%0A%09TPACKET_V3 = 0x2%0A)%0A%0Aconst (%0A%09SizeofTpacketHdr  = 0x18%0A%09SizeofTpacket2Hdr = 0x20%0A%09SizeofTpacket3Hdr = 0x30%0A)%0A
- f ec326b7d6ce7456772d8a7d3e1a1328cbfdd92609d1e9a87c3f17725b36ee1f0 vendor/golang.org/x/sys/unix/ztypes_linux_ppc64.go
+ f 073e193a8dad5a6db96e799ba575e7328f14e4483ea8729e95684a8cd389be6e vendor/golang.org/x/sys/unix/ztypes_linux_ppc64.go
dmppatch 3
@@ -27494,16 +27494,1596 @@
 RONOUS = 0x10%0A)%0A
+%0Atype TpacketHdr struct %7B%0A%09Status  uint64%0A%09Len     uint32%0A%09Snaplen uint32%0A%09Mac     uint16%0A%09Net     uint16%0A%09Sec     uint32%0A%09Usec    uint32%0A%09_       %5B4%5Dbyte%0A%7D%0A%0Atype Tpacket2Hdr struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Sec       uint32%0A%09Nsec      uint32%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%09_         %5B4%5Duint8%0A%7D%0A%0Atype Tpacket3Hdr struct %7B%0A%09Next_offset uint32%0A%09Sec         uint32%0A%09Nsec        uint32%0A%09Snaplen     uint32%0A%09Len         uint32%0A%09Status      uint32%0A%09Mac         uint16%0A%09Net         uint16%0A%09Hv1         TpacketHdrVariant1%0A%09_           %5B8%5Duint8%0A%7D%0A%0Atype TpacketHdrVariant1 struct %7B%0A%09Rxhash    uint32%0A%09Vlan_tci  uint32%0A%09Vlan_tpid uint16%0A%09_         uint16%0A%7D%0A%0Atype TpacketBlockDesc struct %7B%0A%09Version uint32%0A%09To_priv uint32%0A%09Hdr     %5B40%5Dbyte%0A%7D%0A%0Atype TpacketReq struct %7B%0A%09Block_size uint32%0A%09Block_nr   uint32%0A%09Frame_size uint32%0A%09Frame_nr   uint32%0A%7D%0A%0Atype TpacketReq3 struct %7B%0A%09Block_size       uint32%0A%09Block_nr         uint32%0A%09Frame_size       uint32%0A%09Frame_nr         uint32%0A%09Retire_blk_tov   uint32%0A%09Sizeof_priv      uint32%0A%09Feature_req_word uint32%0A%7D%0A%0Atype TpacketStats struct %7B%0A%09Packets uint32%0A%09Drops   uint32%0A%7D%0A%0Atype TpacketStatsV3 struct %7B%0A%09Packets      uint32%0A%09Drops        uint32%0A%09Freeze_q_cnt uint32%0A%7D%0A%0Atype TpacketAuxdata struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%7D%0A%0Aconst (%0A%09TPACKET_V1 = 0x0%0A%09TPACKET_V2 = 0x1%0A%09TPACKET_V3 = 0x2%0A)%0A%0Aconst (%0A%09SizeofTpacketHdr  = 0x20%0A%09SizeofTpacket2Hdr = 0x20%0A%09SizeofTpacket3Hdr = 0x30%0A)%0A
- f de8a9f562f919a1e23b6fe32afe9fa0343d75cf9f6e86e338f57648d8ba8208c vendor/golang.org/x/sys/unix/ztypes_linux_ppc64le.go
+ f 3ea6de30d70f1f509cd36d8c2529b71883517af7150f834adc7fc8cad348e2e3 vendor/golang.org/x/sys/unix/ztypes_linux_ppc64le.go
dmppatch 3
@@ -27496,16 +27496,1596 @@
 RONOUS = 0x10%0A)%0A
+%0Atype TpacketHdr struct %7B%0A%09Status  uint64%0A%09Len     uint32%0A%09Snaplen uint32%0A%09Mac     uint16%0A%09Net     uint16%0A%09Sec     uint32%0A%09Usec    uint32%0A%09_       %5B4%5Dbyte%0A%7D%0A%0Atype Tpacket2Hdr struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Sec       uint32%0A%09Nsec      uint32%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%09_         %5B4%5Duint8%0A%7D%0A%0Atype Tpacket3Hdr struct %7B%0A%09Next_offset uint32%0A%09Sec         uint32%0A%09Nsec        uint32%0A%09Snaplen     uint32%0A%09Len         uint32%0A%09Status      uint32%0A%09Mac         uint16%0A%09Net         uint16%0A%09Hv1         TpacketHdrVariant1%0A%09_           %5B8%5Duint8%0A%7D%0A%0Atype TpacketHdrVariant1 struct %7B%0A%09Rxhash    uint32%0A%09Vlan_tci  uint32%0A%09Vlan_tpid uint16%0A%09_         uint16%0A%7D%0A%0Atype TpacketBlockDesc struct %7B%0A%09Version uint32%0A%09To_priv uint32%0A%09Hdr     %5B40%5Dbyte%0A%7D%0A%0Atype TpacketReq struct %7B%0A%09Block_size uint32%0A%09Block_nr   uint32%0A%09Frame_size uint32%0A%09Frame_nr   uint32%0A%7D%0A%0Atype TpacketReq3 struct %7B%0A%09Block_size       uint32%0A%09Block_nr         uint32%0A%09Frame_size       uint32%0A%09Frame_nr         uint32%0A%09Retire_blk_tov   uint32%0A%09Sizeof_priv      uint32%0A%09Feature_req_word uint32%0A%7D%0A%0Atype TpacketStats struct %7B%0A%09Packets uint32%0A%09Drops   uint32%0A%7D%0A%0Atype TpacketStatsV3 struct %7B%0A%09Packets      uint32%0A%09Drops        uint32%0A%09Freeze_q_cnt uint32%0A%7D%0A%0Atype TpacketAuxdata struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%7D%0A%0Aconst (%0A%09TPACKET_V1 = 0x0%0A%09TPACKET_V2 = 0x1%0A%09TPACKET_V3 = 0x2%0A)%0A%0Aconst (%0A%09SizeofTpacketHdr  = 0x20%0A%09SizeofTpacket2Hdr = 0x20%0A%09SizeofTpacket3Hdr = 0x30%0A)%0A
- f 51770f6ac9832802a81a9c51c80718a0da245156481fa1b2b786002f72a4c018 vendor/golang.org/x/sys/unix/ztypes_linux_s390x.go
+ f f224e6e9090d8dbb9305626ac9f4a29383e714dc77c76a20dfec720e7e29f259 vendor/golang.org/x/sys/unix/ztypes_linux_s390x.go
dmppatch 3
@@ -27888,16 +27888,1596 @@
 RONOUS = 0x10%0A)%0A
+%0Atype TpacketHdr struct %7B%0A%09Status  uint64%0A%09Len     uint32%0A%09Snaplen uint32%0A%09Mac     uint16%0A%09Net     uint16%0A%09Sec     uint32%0A%09Usec    uint32%0A%09_       %5B4%5Dbyte%0A%7D%0A%0Atype Tpacket2Hdr struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Sec       uint32%0A%09Nsec      uint32%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%09_         %5B4%5Duint8%0A%7D%0A%0Atype Tpacket3Hdr struct %7B%0A%09Next_offset uint32%0A%09Sec         uint32%0A%09Nsec        uint32%0A%09Snaplen     uint32%0A%09Len         uint32%0A%09Status      uint32%0A%09Mac         uint16%0A%09Net         uint16%0A%09Hv1         TpacketHdrVariant1%0A%09_           %5B8%5Duint8%0A%7D%0A%0Atype TpacketHdrVariant1 struct %7B%0A%09Rxhash    uint32%0A%09Vlan_tci  uint32%0A%09Vlan_tpid uint16%0A%09_         uint16%0A%7D%0A%0Atype TpacketBlockDesc struct %7B%0A%09Version uint32%0A%09To_priv uint32%0A%09Hdr     %5B40%5Dbyte%0A%7D%0A%0Atype TpacketReq struct %7B%0A%09Block_size uint32%0A%09Block_nr   uint32%0A%09Frame_size uint32%0A%09Frame_nr   uint32%0A%7D%0A%0Atype TpacketReq3 struct %7B%0A%09Block_size       uint32%0A%09Block_nr         uint32%0A%09Frame_size       uint32%0A%09Frame_nr         uint32%0A%09Retire_blk_tov   uint32%0A%09Sizeof_priv      uint32%0A%09Feature_req_word uint32%0A%7D%0A%0Atype TpacketStats struct %7B%0A%09Packets uint32%0A%09Drops   uint32%0A%7D%0A%0Atype TpacketStatsV3 struct %7B%0A%09Packets      uint32%0A%09Drops        uint32%0A%09Freeze_q_cnt uint32%0A%7D%0A%0Atype TpacketAuxdata struct %7B%0A%09Status    uint32%0A%09Len       uint32%0A%09Snaplen   uint32%0A%09Mac       uint16%0A%09Net       uint16%0A%09Vlan_tci  uint16%0A%09Vlan_tpid uint16%0A%7D%0A%0Aconst (%0A%09TPACKET_V1 = 0x0%0A%09TPACKET_V2 = 0x1%0A%09TPACKET_V3 = 0x2%0A)%0A%0Aconst (%0A%09SizeofTpacketHdr  = 0x20%0A%09SizeofTpacket2Hdr = 0x20%0A%09SizeofTpacket3Hdr = 0x30%0A)%0A
treehash d6a0846709f73516bddc9baafa501cf40013bdc667799274a32698297f487da9
